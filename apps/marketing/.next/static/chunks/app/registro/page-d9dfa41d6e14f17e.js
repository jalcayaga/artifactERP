(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{9611:function(e,a,r){Promise.resolve().then(r.bind(r,6276))},6276:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return x}});var s,l,t,n,o=r(7573),c=r(7653),i=r(1695),d=r(8146);(s=t||(t={}))[s.Account=1]="Account",s[s.Business=2]="Business",s[s.Plan=3]="Plan",s[s.Payment=4]="Payment",s[s.Success=5]="Success",(l=n||(n={})).DESPEGA="DESPEGA",l.CONSOLIDA="CONSOLIDA",l.LIDERA="LIDERA";let m=[{id:1,label:"Cuenta"},{id:2,label:"Negocio"},{id:3,label:"Plan"},{id:4,label:"Pago"}];function x(){(0,i.useRouter)();let e=(0,i.useSearchParams)().get("plan"),[a,r]=(0,c.useState)(1),[s,l]=(0,c.useState)(!1),[t,n]=(0,c.useState)(null),[x,b]=(0,c.useState)({name:"",email:"",password:"",companyName:"",slug:"",businessType:"",plan:e?e.toUpperCase():""}),u=e=>{let{name:a,value:r}=e.target;b(e=>{let s={...e,[a]:r};return"companyName"!==a||e.slug||(s.slug=r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")),s})},p=e=>{b(a=>({...a,plan:e}))},h=async()=>{l(!0),n(null);try{await new Promise(e=>setTimeout(e,2e3));let e=await fetch("http://localhost:3002/tenants/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:x.companyName,email:x.email,password:x.password,slug:x.slug||void 0,plan:x.plan})});if(!e.ok){let a=await e.json();throw Error(a.message||"Error al registrar.")}let a=await e.json();console.log("Registration Success:",a),r(5)}catch(e){n(e.message)}finally{l(!1)}};return(0,o.jsxs)("div",{className:"min-h-screen pt-24 pb-12 bg-black text-white px-4",children:[(0,o.jsx)(d.default,{href:"/",className:"absolute top-6 left-6 text-gray-400 hover:text-[var(--brand-color)] flex items-center gap-2",children:"← Volver al inicio"}),(0,o.jsxs)("div",{className:"max-w-2xl mx-auto text-center mb-10",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Configura tu Artifact ERP"}),(0,o.jsx)("p",{className:"text-gray-400",children:"Est\xe1s a pocos pasos de digitalizar tu negocio."})]}),5!==a&&(0,o.jsxs)("div",{className:"flex justify-between mb-8 max-w-xl mx-auto relative",children:[(0,o.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-gray-700 -z-10 transform -translate-y-1/2"}),m.map(e=>(0,o.jsxs)("div",{className:"flex flex-col items-center bg-black px-2",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all duration-300\n                    ".concat(e.id<=a?"bg-[var(--brand-color)] border-[var(--brand-color)] text-black":"bg-gray-800 border-gray-600 text-gray-400"),children:e.id}),(0,o.jsx)("span",{className:"text-xs mt-2 ".concat(e.id<=a?"text-[var(--brand-color)]":"text-gray-500"),children:e.label})]},e.id))]}),(0,o.jsxs)("div",{className:"max-w-xl mx-auto bg-[var(--card-bg)] p-8 rounded-2xl border border-[var(--border-color)]",children:[1===a&&(0,o.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[var(--brand-color)]",children:"Tus Datos"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"Nombre Completo"}),(0,o.jsx)("input",{type:"text",name:"name",value:x.name,onChange:u,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-[var(--brand-color)] outline-none",placeholder:"Juan P\xe9rez"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"Correo Electr\xf3nico"}),(0,o.jsx)("input",{type:"email",name:"email",value:x.email,onChange:u,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-[var(--brand-color)] outline-none",placeholder:"juan@empresa.com"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"Contrase\xf1a"}),(0,o.jsx)("input",{type:"password",name:"password",value:x.password,onChange:u,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-[var(--brand-color)] outline-none",placeholder:"••••••••"})]})]}),2===a&&(0,o.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[var(--brand-color)]",children:"Tu Negocio"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"Nombre de la Empresa"}),(0,o.jsx)("input",{type:"text",name:"companyName",value:x.companyName,onChange:u,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-[var(--brand-color)] outline-none",placeholder:"Mi Empresa SpA"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"URL del Sistema (Slug)"}),(0,o.jsxs)("div",{className:"flex items-center bg-gray-900 border border-gray-700 rounded-lg overflow-hidden",children:[(0,o.jsx)("span",{className:"pl-3 text-gray-500",children:"artifact.cl/"}),(0,o.jsx)("input",{type:"text",name:"slug",value:x.slug,onChange:u,className:"w-full p-3 bg-transparent text-white outline-none",placeholder:"mi-empresa"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"block text-gray-400 mb-2",children:"Rubro"}),(0,o.jsxs)("select",{name:"businessType",value:x.businessType,onChange:u,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-[var(--brand-color)] outline-none",children:[(0,o.jsx)("option",{value:"",children:"Seleccionar..."}),(0,o.jsx)("option",{value:"RETAIL",children:"Retail"}),(0,o.jsx)("option",{value:"SERVICES",children:"Servicios"}),(0,o.jsx)("option",{value:"FOOD",children:"Gastronom\xeda"})]})]})]}),3===a&&(0,o.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[var(--brand-color)]",children:"Elige tu Plan"}),(0,o.jsx)("div",{className:"grid gap-4",children:["DESPEGA","CONSOLIDA","LIDERA"].map(e=>(0,o.jsx)("div",{onClick:()=>p(e),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat(x.plan===e?"border-[var(--brand-color)] bg-[rgba(0,255,127,0.1)]":"border-gray-700 hover:border-gray-500"),children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"font-bold",children:e}),x.plan===e&&(0,o.jsx)("span",{className:"text-[var(--brand-color)]",children:"✓"})]})},e))})]}),4===a&&(0,o.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[var(--brand-color)]",children:"Resumen y Pago"}),(0,o.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg space-y-2 text-sm text-gray-300",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Empresa:"}),(0,o.jsx)("span",{className:"text-white font-medium",children:x.companyName})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Usuario Maestro:"}),(0,o.jsx)("span",{className:"text-white font-medium",children:x.email})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Plan Seleccionado:"}),(0,o.jsx)("span",{className:"text-[var(--brand-color)] font-bold",children:x.plan})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,o.jsx)("p",{className:"text-center text-gray-400 mb-4 text-sm",children:"Simulaci\xf3n de Pasarela de Pago (Webpay/Stripe)"}),(0,o.jsx)("div",{className:"bg-gray-800 h-12 rounded flex items-center justify-center text-gray-500",children:"[ Tarjeta de Cr\xe9dito **** **** **** 4242 ]"})]})]}),5===a&&(0,o.jsxs)("div",{className:"text-center py-8 animate-fadeIn",children:[(0,o.jsx)("div",{className:"w-20 h-20 bg-[var(--brand-color)] rounded-full flex items-center justify-center text-black text-4xl mx-auto mb-6",children:"✓"}),(0,o.jsx)("h2",{className:"text-3xl font-bold mb-4 text-white",children:"\xa1Todo listo!"}),(0,o.jsxs)("p",{className:"text-gray-400 mb-8",children:["Tu entorno ",(0,o.jsx)("strong",{children:x.companyName})," ha sido creado exitosamente."]}),(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsx)("a",{href:"http://localhost:3001",target:"_blank",className:"block w-full py-4 bg-[var(--brand-color)] text-black font-bold rounded-lg hover:opacity-90 transition-opacity",children:"Ir a mi Panel Admin"})})]}),t&&(0,o.jsx)("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-3 rounded-lg mt-4 text-sm",children:t}),5!==a&&(0,o.jsxs)("div",{className:"flex gap-4 mt-8",children:[a>1&&(0,o.jsx)("button",{onClick:()=>{r(e=>e-1)},className:"flex-1 py-3 border border-gray-600 rounded-lg text-gray-400 hover:text-white hover:border-gray-400 transition-colors",children:"Atr\xe1s"}),a<4?(0,o.jsx)("button",{onClick:()=>{if(n(null),1===a){if(!x.name||!x.email||!x.password){n("Por favor completa todos los campos.");return}if(x.password.length<6){n("La contrase\xf1a debe tener al menos 6 caracteres.");return}}if(2===a&&!x.companyName){n("El nombre de la empresa es obligatorio.");return}if(3===a&&!x.plan){n("Debes seleccionar un plan.");return}r(e=>e+1)},className:"flex-1 py-3 bg-[var(--brand-color)] text-black font-bold rounded-lg hover:opacity-90 transition-opacity",children:"Continuar"}):(0,o.jsxs)("button",{onClick:h,disabled:s,className:"flex-1 py-3 bg-[var(--brand-color)] text-black font-bold rounded-lg hover:opacity-90 transition-opacity flex justify-center items-center gap-2 ".concat(s?"opacity-50 cursor-not-allowed":""),children:[s&&(0,o.jsxs)("svg",{className:"animate-spin h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Procesando...":"Pagar y Crear Cuenta"]})]})]})]})}}},function(e){e.O(0,[738,293,528,744],function(){return e(e.s=9611)}),_N_E=e.O()}]);
(()=>{var e={};e.id=3040,e.ids=[3040],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5833:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),t(2057),t(8951),t(5866),t(1506);var a=t(3191),s=t(8716),o=t(7922),i=t.n(o),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let l=["",{children:["(public)",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2057)),"/home/astro/subred-erp/frontend/app/(public)/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8951)),"/home/astro/subred-erp/frontend/app/(public)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"/home/astro/subred-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/astro/subred-erp/frontend/app/(public)/checkout/page.tsx"],u="/(public)/checkout/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(public)/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6751:(e,r,t)=>{Promise.resolve().then(t.bind(t,7123))},7123:(e,r,t)=>{"use strict";t.d(r,{default:()=>x});var a=t(326),s=t(7577),o=t(3255),i=t(7394),n=t(7863),d=t(2643),l=t(772),c=t(6384),u=t(1048),p=t(4474),m=t(5904),h=t(5047);let x=()=>{let{items:e,cartTotal:r,clearCart:t}=(0,o.j)(),{currentUser:x,token:f}=(0,i.a)(),g=(0,h.useRouter)(),[y,b]=(0,s.useState)({email:x?.email||"",name:x?`${x.firstName} ${x.lastName}`:"",address1:"",address2:"",city:"",postalCode:"",country:"Chile",phone:""}),[v,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[P,C]=(0,s.useState)(null),_=e=>{b({...y,[e.target.id]:e.target.value})},q=async r=>{if(r.preventDefault(),w(!0),C(null),!f){C("Debes iniciar sesi\xf3n para completar el pedido."),w(!1);return}if(0===e.length){C("Tu carrito est\xe1 vac\xedo."),w(!1);return}if(!v){C("Por favor, selecciona un m\xe9todo de pago."),w(!1);return}try{let r={items:e.map(e=>({productId:e.productId,quantity:e.quantity})),shippingAddress:{name:y.name,address1:y.address1,address2:y.address2,city:y.city,postalCode:y.postalCode,country:y.country,phone:y.phone},paymentMethod:v,customerNotes:""},a=await m.p.createOrder(r,f);t(),g.push(`/order-confirmation?orderId=${a.id}`)}catch(e){console.error("Error during checkout:",e),C("Hubo un error al procesar tu pedido. Por favor, int\xe9ntalo de nuevo.")}finally{w(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-foreground tracking-tight text-center mb-8 md:mb-12",children:"Checkout"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[a.jsx("div",{children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"Informaci\xf3n de Contacto y Env\xedo"})}),a.jsx(d.aY,{children:(0,a.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"email",children:"Correo Electr\xf3nico"}),a.jsx(c.I,{type:"email",id:"email",placeholder:"tucorreo@ejemplo.com",value:y.email,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"name",children:"Nombre Completo"}),a.jsx(c.I,{type:"text",id:"name",placeholder:"Juan P\xe9rez",value:y.name,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"address1",children:"Direcci\xf3n de Env\xedo (L\xednea 1)"}),a.jsx(c.I,{type:"text",id:"address1",placeholder:"Calle Falsa 123",value:y.address1,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"address2",children:"Direcci\xf3n de Env\xedo (L\xednea 2 - Opcional)"}),a.jsx(c.I,{type:"text",id:"address2",placeholder:"Depto, oficina, etc.",value:y.address2,onChange:_})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"city",children:"Ciudad"}),a.jsx(c.I,{type:"text",id:"city",placeholder:"Santiago",value:y.city,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"postalCode",children:"C\xf3digo Postal"}),a.jsx(c.I,{type:"text",id:"postalCode",placeholder:"Ej: 7500000",value:y.postalCode,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"country",children:"Pa\xeds"}),a.jsx(c.I,{type:"text",id:"country",placeholder:"Chile",value:y.country,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"phone",children:"Tel\xe9fono"}),a.jsx(c.I,{type:"tel",id:"phone",placeholder:"+56912345678",value:y.phone,onChange:_,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"paymentMethod",children:"M\xe9todo de Pago"}),(0,a.jsxs)(p.Ph,{onValueChange:e=>{j(e)},value:v,required:!0,children:[a.jsx(p.i4,{id:"paymentMethod",children:a.jsx(p.ki,{placeholder:"Selecciona un m\xe9todo de pago"})}),(0,a.jsxs)(p.Bw,{children:[a.jsx(p.Ql,{value:"credit_card",children:"Tarjeta de Cr\xe9dito"}),a.jsx(p.Ql,{value:"debit_card",children:"Tarjeta de D\xe9bito"}),a.jsx(p.Ql,{value:"bank_transfer",children:"Transferencia Bancaria"}),a.jsx(p.Ql,{value:"paypal",children:"PayPal"})]})]})]}),P&&a.jsx("p",{className:"text-destructive text-sm",children:P}),a.jsx(l.z,{type:"submit",className:"w-full",disabled:N||0===e.length||!v,children:N?"Procesando...":"Realizar Pedido"})]})})]})}),a.jsx("div",{children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"Resumen del Pedido"})}),a.jsx(d.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Cantidad: ",e.quantity]})]}),a.jsx("p",{children:(0,n.eQ)(e.price*e.quantity)})]},e.productId)),a.jsx("hr",{className:"border-border my-4"}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[a.jsx("p",{children:"Total"}),a.jsx("p",{children:(0,n.eQ)(r)})]})]})})]})})]})]})}},772:(e,r,t)=>{"use strict";t.d(r,{z:()=>c});var a=t(326),s=t(7577),o=t.n(s),i=t(4214),n=t(9360),d=t(7863);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",outline:"border border-primary-500 text-primary-500 hover:bg-primary-50",ghost:"hover:bg-gray-100"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-8"}},defaultVariants:{variant:"default",size:"default"}}),c=o().forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...o},n)=>{let c=s?i.g7:"button";return a.jsx(c,{className:(0,d.cn)(l({variant:r,size:t,className:e})),ref:n,...o})});c.displayName="Button"},2643:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>d,SZ:()=>c,Zb:()=>n,aY:()=>u,eW:()=>p,ll:()=>l});var a=t(326),s=t(7577),o=t.n(s),i=t(7863);let n=o().forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("rounded-xl bg-card text-card-foreground shadow-sm","border border-border","transition-all duration-200 ease-in-out","hover:shadow-lg dark:hover:shadow-primary/20","hover:border-border dark:hover:border-primary/40","dark:hover:bg-muted/20",e),...r}));n.displayName="Card";let d=o().forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-5",e),...r}));d.displayName="CardHeader";let l=o().forwardRef(({className:e,...r},t)=>a.jsx("h3",{ref:t,className:(0,i.cn)("text-xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let c=o().forwardRef(({className:e,...r},t)=>a.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let u=o().forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("p-5 pt-0",e),...r}));u.displayName="CardContent";let p=o().forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-5 pt-0",e),...r}));p.displayName="CardFooter"},6384:(e,r,t)=>{"use strict";t.d(r,{I:()=>i});var a=t(326),s=t(7577),o=t(7863);let i=s.forwardRef(({className:e,type:r,...t},s)=>a.jsx("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));i.displayName="Input"},1048:(e,r,t)=>{"use strict";t.d(r,{_:()=>l});var a=t(326),s=t(7577),o=t(4478),i=t(9360),n=t(7863);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef(({className:e,...r},t)=>a.jsx(o.f,{ref:t,className:(0,n.cn)(d(),e),...r}));l.displayName=o.f.displayName},4474:(e,r,t)=>{"use strict";t.d(r,{Bw:()=>p,Ph:()=>l,Ql:()=>m,i4:()=>u,ki:()=>c});var a=t(326),s=t(7577),o=t(7185),i=t(8393),n=t(2933),d=t(7863);let l=o.fC;o.ZA;let c=o.B4,u=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(o.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,a.jsx(o.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=o.xz.displayName;let p=s.forwardRef(({className:e,children:r,position:t="popper",...s},i)=>a.jsx(o.h_,{children:a.jsx(o.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:a.jsx(o.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})}));p.displayName=o.VY.displayName,s.forwardRef(({className:e,...r},t)=>a.jsx(o.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=o.__.displayName;let m=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(o.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(o.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(o.eT,{children:r})]}));m.displayName=o.ck.displayName,s.forwardRef(({className:e,...r},t)=>a.jsx(o.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=o.Z0.displayName},5904:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var a=t(4099);let s=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",o={async createOrder(e,r){try{return(await a.Z.post(`${s}/orders`,e,{headers:{Authorization:`Bearer ${r}`}})).data}catch(e){throw console.error("Error creating order:",e),e}},async getUserOrders(e,r=1,t=10){try{return(await a.Z.get(`${s}/orders`,{headers:{Authorization:`Bearer ${e}`},params:{page:r,limit:t}})).data}catch(e){throw console.error("Error fetching user orders:",e),e}},async getOrderById(e,r){try{return(await a.Z.get(`${s}/orders/${e}`,{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){throw console.error(`Error fetching order ${e}:`,r),r}}}},7863:(e,r,t)=>{"use strict";t.d(r,{LH:()=>d,cn:()=>o,eQ:()=>i,fW:()=>l,p6:()=>n});var a=t(1135),s=t(1009);function o(...e){return(0,s.m6)((0,a.W)(e))}function i(e){let r=Number(e);if(isNaN(r))return"$0";let t=Math.abs(r),a=(t%1).toFixed(2).substring(2),s=Math.trunc(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),o=`$${s}`;return"00"!==a&&(o+=`,${a}`),r<0?`-${o}`:o}function n(e){try{let r=new Date(e),t=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),s=r.getFullYear();return`${t}/${a}/${s}`}catch(r){return console.error("Invalid date provided to formatDate:",e),"Fecha inv\xe1lida"}}function d(e){if("string"!=typeof e)return NaN;let r=parseFloat(e.replace(/\$\s?|(,*)/g,"").replace(/\./g,"").replace(",","."));return isNaN(r)?0:r}function l(e){if("string"!=typeof e||(e=e.replace(/\./g,"").replace(/-/g,"")).length<2)return!1;let r=e.slice(0,-1),t=e.slice(-1).toUpperCase(),a=0,s=2;for(let e=r.length-1;e>=0;e--)a+=parseInt(r[e],10)*s,++s>7&&(s=2);let o=11-a%11;return(11===o?"0":10===o?"K":o.toString())===t}},5047:(e,r,t)=>{"use strict";var a=t(7389);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},2057:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(9510);let s=(0,t(8570).createProxy)(String.raw`/home/astro/subred-erp/frontend/components/ecommerce/CheckoutView.tsx#default`);function o(){return a.jsx(s,{})}},4478:(e,r,t)=>{"use strict";t.d(r,{f:()=>n});var a=t(7577),s=t(5226),o=t(326),i=a.forwardRef((e,r)=>(0,o.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var n=i}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[7364,434,325,531,6226,2574,4278,5459],()=>t(5833));module.exports=a})();
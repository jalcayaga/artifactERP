(()=>{var e={};e.id=8427,e.ids=[8427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4077:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(2977),r(596),r(1506),r(5866);var s=r(3191),a=r(8716),o=r(7922),i=r.n(o),l=r(5231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let d=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2977)),"/home/astro/subred-erp/frontend/app/admin/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"/home/astro/subred-erp/frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/home/astro/subred-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/astro/subred-erp/frontend/app/admin/dashboard/page.tsx"],u="/admin/dashboard/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7173:(e,t,r)=>{Promise.resolve().then(r.bind(r,9918))},9918:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(326),a=r(7577),o=r(2643),i=r(4762),l=r(6899),n=r(6125),d=r(7863);let c=()=>{let e=(0,a.useRef)(null),t=(0,a.useRef)(null),{theme:r}=(0,n.F)(),[o,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{i(e=>e+1)},[r]),(0,a.useEffect)(()=>{if(!e.current)return;let r=e.current.getContext("2d");if(!r)return;t.current&&t.current.destroy();let s=getComputedStyle(document.documentElement),a=s.getPropertyValue("--primary-hsl-values").trim(),o=s.getPropertyValue("--card-foreground-hsl-values").trim(),i=s.getPropertyValue("--muted-foreground-hsl-values").trim(),n=s.getPropertyValue("--border-hsl-values").trim(),c=s.getPropertyValue("--card-hsl-values").trim(),u=`hsl(${a})`,p=`hsla(${a}, 0.2)`,m=`hsl(${o})`,x=`hsl(${i})`,h=`hsla(${n}, 0.5)`,g=`hsl(${c})`;return t.current=new l.ZP(r,{type:"line",data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio"],datasets:[{label:"Ventas del Mes",data:[125e4,198e4,153e4,225e4,187e4,256e4],borderColor:u,backgroundColor:p,fill:!0,tension:.35,pointBackgroundColor:u,pointBorderColor:g,pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,pointHoverBackgroundColor:u,pointHoverBorderColor:g,pointHoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1,grid:{color:h},ticks:{color:x,padding:8,callback:function(e){return"number"==typeof e?Math.abs(e)>=1e6?`$${(e/1e6).toFixed(1)}M`:Math.abs(e)>=1e3?`$${(e/1e3).toFixed(0)}K`:(0,d.eQ)(e):e}}},x:{grid:{display:!1},ticks:{color:x,padding:8}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:g,titleColor:m,bodyColor:m,borderColor:h,borderWidth:1,padding:12,cornerRadius:4,usePointStyle:!0,callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=(0,d.eQ)(e.parsed.y)),t}}}},interaction:{mode:"index",intersect:!1}}}),()=>{t.current&&(t.current.destroy(),t.current=null)}},[r,o]),s.jsx("div",{style:{height:"350px",position:"relative"},children:s.jsx("canvas",{ref:e,role:"img","aria-label":"Gr\xe1fico de resumen de ventas mensuales"})},o)};var u=r(4099);let p=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",m={async getStats(e){try{return(await u.Z.get(`${p}/dashboard`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){throw console.error("Error fetching dashboard stats:",e),e}}};var x=r(7394);let h=({title:e,value:t,icon:r})=>s.jsx(o.Zb,{className:"overflow-hidden",children:(0,s.jsxs)(o.aY,{className:"p-5",children:[" ",(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10 dark:bg-primary/20 mr-4",children:s.jsx(r,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-2xl font-semibold text-foreground",children:t})]})]})]})}),g="wolfflow_dashboard_tasks",f=[{id:1,text:"Revisar propuesta Cliente Alfa",due:"Ma\xf1ana",completed:!1},{id:2,text:"Contactar Proveedor Beta",due:"En 3 d\xedas",completed:!1},{id:3,text:"Generar reporte de ventas Q3",due:"Pr\xf3xima semana",completed:!1},{id:4,text:"Actualizar inventario",due:"Hoy",completed:!0}],b=()=>{let{token:e}=(0,x.a)(),[t,r]=(0,a.useState)(()=>{try{let e=localStorage.getItem(g);if(e)return JSON.parse(e).map(e=>({...e,completed:e.completed||!1}))}catch(e){console.error("Error loading tasks from localStorage:",e)}return f}),[l,n]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(!e){v("No autorizado. Por favor, inicie sesi\xf3n como administrador."),p(!1);return}try{let t=await m.getStats(e);n(t)}catch(e){console.error("Error fetching dashboard stats:",e),v("Error al cargar las estad\xedsticas del dashboard.")}finally{p(!1)}})()},[e]),(0,a.useEffect)(()=>{try{localStorage.setItem(g,JSON.stringify(t))}catch(e){console.error("Error saving tasks to localStorage:",e)}},[t]);let y=(0,a.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t))},[]),j=l?.recentActivities.map(e=>({id:e.id,user:`${e.user.firstName} ${e.user.lastName}`,action:`cre\xf3 un pedido con estado ${e.status}`,time:new Date(e.createdAt).toLocaleDateString(),avatar:`https://placehold.co/40x40/EFEFEF/31343C?text=${e.user.firstName.charAt(0)}`}))||[];return(0,s.jsxs)("div",{className:"space-y-6 lg:space-y-8",children:[s.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Dashboard General"}),u?s.jsx("p",{children:"Cargando estad\xedsticas..."}):b?s.jsx("p",{className:"text-destructive",children:b}):(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(h,{title:"Clientes Activos",value:l?.totalUsers.toString()||"N/A",icon:i.oy}),s.jsx(h,{title:"Ventas del Mes",value:(0,d.eQ)(l?.totalSalesAmount||0),icon:i.Q1}),s.jsx(h,{title:"Productos en Stock",value:l?.totalProducts.toString()||"N/A",icon:i.vx}),s.jsx(h,{title:"Facturas Pendientes",value:l?.pendingInvoices.toString()||"N/A",icon:i.ci})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[(0,s.jsxs)(o.Zb,{className:"lg:col-span-2",children:[(0,s.jsxs)(o.Ol,{children:[" ",s.jsx(o.ll,{className:"text-xl text-primary",children:"Actividad Reciente"})]}),(0,s.jsxs)(o.aY,{children:[" ",s.jsx("ul",{className:"space-y-4",children:j.length>0?j.map(e=>(0,s.jsxs)("li",{className:"flex items-start space-x-3",children:[s.jsx("img",{className:"w-10 h-10 rounded-full",src:e.avatar,alt:e.user}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-foreground",children:[s.jsx("span",{className:"font-medium",children:e.user})," ",e.action,"."]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},e.id)):s.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-4",children:"No hay actividad reciente."})}),s.jsx("div",{className:"mt-6 text-right",children:s.jsx("button",{className:"text-sm font-medium text-primary hover:text-primary/80 dark:hover:text-primary/70",children:"Ver toda la actividad"})})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[" ",s.jsx(o.ll,{className:"text-lg",children:"Tareas Pendientes"})]}),(0,s.jsxs)(o.aY,{children:[" ",t.length>0?s.jsx("ul",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:`flex-1 ${e.completed?"opacity-60":""}`,children:[s.jsx("label",{htmlFor:`task-${e.id}`,className:`text-sm font-medium text-foreground cursor-pointer ${e.completed?"line-through":""}`,children:e.text}),(0,s.jsxs)("p",{className:`text-xs text-muted-foreground ${e.completed?"line-through":""}`,children:["Vence: ",e.due]})]}),s.jsx("input",{id:`task-${e.id}`,type:"checkbox",checked:e.completed,onChange:()=>y(e.id),className:"form-checkbox h-4 w-4 text-primary rounded border-border focus:ring-primary ml-3 flex-shrink-0"})]},e.id))}):s.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-4",children:"No hay tareas pendientes."}),s.jsx("div",{className:"mt-4 text-right",children:s.jsx("button",{className:"text-sm font-medium text-primary hover:text-primary/80 dark:hover:text-primary/70",children:"Ver todas las tareas"})})]})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[" ",s.jsx(o.ll,{className:"text-lg",children:"Resumen de Ventas"})]}),(0,s.jsxs)(o.aY,{className:"p-5",children:[" ",s.jsx(c,{})]})]})]})};function v(){return s.jsx(b,{})}},2977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/home/astro/subred-erp/frontend/app/admin/dashboard/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7364,434,325,185,4278,4139],()=>r(4077));module.exports=s})();
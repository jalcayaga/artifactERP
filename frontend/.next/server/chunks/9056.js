"use strict";exports.id=9056,exports.ids=[9056],exports.modules={8168:(e,a,s)=>{s.d(a,{Z:()=>g});var r=s(326),t=s(7577),i=s(7394),l=s(4099);let o=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",d={async getAllUsers(e){try{return(await l.Z.get(`${o}/users`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){throw console.error("Error fetching users:",e),e}},async getUserById(e,a){try{return(await l.Z.get(`${o}/users/${e}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw console.error(`Error fetching user ${e}:`,a),a}},async createUser(e,a){try{return(await l.Z.post(`${o}/users`,e,{headers:{Authorization:`Bearer ${a}`}})).data}catch(e){throw console.error("Error creating user:",e),e}},async updateUser(e,a,s){try{return(await l.Z.patch(`${o}/users/${e}`,a,{headers:{Authorization:`Bearer ${s}`}})).data}catch(a){throw console.error(`Error updating user ${e}:`,a),a}},async deleteUser(e,a){try{await l.Z.delete(`${o}/users/${e}`,{headers:{Authorization:`Bearer ${a}`}})}catch(a){throw console.error(`Error deleting user ${e}:`,a),a}}};var n=s(2771),c=s(2643),m=s(772),f=s(6384),u=s(1048),p=s(5940),x=s(2288),h=s(4474),N=s(4762);let g=()=>{let{token:e,isAuthenticated:a,currentUser:s}=(0,i.a)(),[l,o]=(0,t.useState)([]),[g,j]=(0,t.useState)(!0),[E,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(!1),[v,D]=(0,t.useState)(null),[R,A]=(0,t.useState)({firstName:"",lastName:"",email:"",role:n.i4.CLIENT,password:""}),C=(0,t.useCallback)(async()=>{if(!a||!e||s?.role!==n.i4.ADMIN){y("No autorizado para ver esta p\xe1gina."),j(!1);return}try{j(!0);let a=await d.getAllUsers(e);o(a)}catch(e){console.error("Error fetching users:",e),y("Error al cargar los usuarios.")}finally{j(!1)}},[a,e,s]);(0,t.useEffect)(()=>{C()},[C]);let I=e=>{let{id:a,value:s}=e.target;A({...R,[a]:s})},T=e=>{e?(D(e),A({firstName:e.firstName,lastName:e.lastName,email:e.email,role:e.role,password:""})):(D(null),A({firstName:"",lastName:"",email:"",role:n.i4.CLIENT,password:""})),w(!0)},P=async a=>{if(a.preventDefault(),e)try{v?await d.updateUser(v.id,R,e):await d.createUser(R,e),w(!1),C()}catch(e){console.error("Error saving user:",e),y("Error al guardar el usuario.")}},_=async a=>{if(e&&window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este usuario?"))try{await d.deleteUser(a,e),C()}catch(e){console.error("Error deleting user:",e),y("Error al eliminar el usuario.")}};return g?r.jsx("div",{className:"text-center py-8",children:"Cargando usuarios..."}):E?r.jsx("div",{className:"text-center py-8 text-destructive",children:E}):a&&s?.role===n.i4.ADMIN?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Gesti\xf3n de Usuarios"}),(0,r.jsxs)(x.Vq,{open:b,onOpenChange:w,children:[r.jsx(x.hg,{asChild:!0,children:(0,r.jsxs)(m.z,{onClick:()=>T(),children:[r.jsx(N.pO,{className:"mr-2 h-4 w-4"})," A\xf1adir Usuario"]})}),(0,r.jsxs)(x.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(x.fK,{children:[r.jsx(x.$N,{children:v?"Editar Usuario":"A\xf1adir Nuevo Usuario"}),(0,r.jsxs)(x.Be,{children:["Complete los campos a continuaci\xf3n para ",v?"editar el usuario existente":"a\xf1adir un nuevo usuario","."]})]}),(0,r.jsxs)("form",{onSubmit:P,className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(u._,{htmlFor:"firstName",className:"text-right",children:"Nombre"}),r.jsx(f.I,{id:"firstName",value:R.firstName,onChange:I,className:"col-span-3",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(u._,{htmlFor:"lastName",className:"text-right",children:"Apellido"}),r.jsx(f.I,{id:"lastName",value:R.lastName,onChange:I,className:"col-span-3",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(u._,{htmlFor:"email",className:"text-right",children:"Email"}),r.jsx(f.I,{id:"email",type:"email",value:R.email,onChange:I,className:"col-span-3",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(u._,{htmlFor:"role",className:"text-right",children:"Rol"}),(0,r.jsxs)(h.Ph,{onValueChange:e=>{A({...R,role:e})},value:R.role,children:[r.jsx(h.i4,{className:"col-span-3",children:r.jsx(h.ki,{placeholder:"Seleccionar Rol"})}),r.jsx(h.Bw,{children:Object.values(n.i4).map(e=>r.jsx(h.Ql,{value:e,children:e},e))})]})]}),!v&&(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(u._,{htmlFor:"password",className:"text-right",children:"Contrase\xf1a"}),r.jsx(f.I,{id:"password",type:"password",value:R.password,onChange:I,className:"col-span-3",required:!0})]}),r.jsx(x.cN,{children:r.jsx(m.z,{type:"submit",children:v?"Guardar Cambios":"A\xf1adir Usuario"})})]})]})]})]}),r.jsx(c.Zb,{children:r.jsx(c.aY,{className:"p-0",children:(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Nombre"}),r.jsx(p.ss,{children:"Email"}),r.jsx(p.ss,{children:"Rol"}),r.jsx(p.ss,{children:"Activo"}),r.jsx(p.ss,{className:"text-right",children:"Acciones"})]})}),r.jsx(p.RM,{children:l.map(e=>(0,r.jsxs)(p.SC,{children:[(0,r.jsxs)(p.pj,{children:[e.firstName," ",e.lastName]}),r.jsx(p.pj,{children:e.email}),r.jsx(p.pj,{children:e.role}),r.jsx(p.pj,{children:e.isActive?"S\xed":"No"}),(0,r.jsxs)(p.pj,{className:"text-right",children:[r.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>T(e),className:"mr-2",children:r.jsx(N.vd,{className:"h-4 w-4"})}),r.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>_(e.id),children:r.jsx(N.XH,{className:"h-4 w-4"})})]})]},e.id))})]})})})]}):r.jsx("div",{className:"text-center py-8 text-destructive",children:"Acceso denegado. No tienes permisos de administrador."})}},772:(e,a,s)=>{s.d(a,{z:()=>c});var r=s(326),t=s(7577),i=s.n(t),l=s(4214),o=s(9360),d=s(7863);let n=(0,o.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",outline:"border border-primary-500 text-primary-500 hover:bg-primary-50",ghost:"hover:bg-gray-100"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-8"}},defaultVariants:{variant:"default",size:"default"}}),c=i().forwardRef(({className:e,variant:a,size:s,asChild:t=!1,...i},o)=>{let c=t?l.g7:"button";return r.jsx(c,{className:(0,d.cn)(n({variant:a,size:s,className:e})),ref:o,...i})});c.displayName="Button"},2288:(e,a,s)=>{s.d(a,{$N:()=>x,Be:()=>h,Vq:()=>d,cN:()=>p,cZ:()=>f,fK:()=>u,hg:()=>n});var r=s(326),t=s(7577),i=s(8958),l=s(4019),o=s(7863);let d=i.fC,n=i.xz,c=i.h_;i.x8;let m=t.forwardRef(({className:e,...a},s)=>r.jsx(i.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));m.displayName=i.aV.displayName;let f=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(c,{children:[r.jsx(m,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(l.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=i.VY.displayName;let u=({className:e,...a})=>r.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});u.displayName="DialogHeader";let p=({className:e,...a})=>r.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});p.displayName="DialogFooter";let x=t.forwardRef(({className:e,...a},s)=>r.jsx(i.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));x.displayName=i.Dx.displayName;let h=t.forwardRef(({className:e,...a},s)=>r.jsx(i.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...a}));h.displayName=i.dk.displayName},6384:(e,a,s)=>{s.d(a,{I:()=>l});var r=s(326),t=s(7577),i=s(7863);let l=t.forwardRef(({className:e,type:a,...s},t)=>r.jsx("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));l.displayName="Input"},1048:(e,a,s)=>{s.d(a,{_:()=>n});var r=s(326),t=s(7577),i=s(4478),l=s(9360),o=s(7863);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=t.forwardRef(({className:e,...a},s)=>r.jsx(i.f,{ref:s,className:(0,o.cn)(d(),e),...a}));n.displayName=i.f.displayName},4474:(e,a,s)=>{s.d(a,{Bw:()=>f,Ph:()=>n,Ql:()=>u,i4:()=>m,ki:()=>c});var r=s(326),t=s(7577),i=s(7185),l=s(8393),o=s(2933),d=s(7863);let n=i.fC;i.ZA;let c=i.B4,m=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(i.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,r.jsx(i.JO,{asChild:!0,children:r.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.xz.displayName;let f=t.forwardRef(({className:e,children:a,position:s="popper",...t},l)=>r.jsx(i.h_,{children:r.jsx(i.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...t,children:r.jsx(i.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a})})}));f.displayName=i.VY.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(i.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=i.__.displayName;let u=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(i.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(i.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(i.eT,{children:a})]}));u.displayName=i.ck.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(i.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=i.Z0.displayName},5940:(e,a,s)=>{s.d(a,{RM:()=>d,SC:()=>n,iA:()=>l,pj:()=>m,ss:()=>c,xD:()=>o});var r=s(326),t=s(7577),i=s(7863);let l=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",e),...a})}));l.displayName="Table";let o=t.forwardRef(({className:e,...a},s)=>r.jsx("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",e),...a}));o.displayName="TableHeader";let d=t.forwardRef(({className:e,...a},s)=>r.jsx("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",t.forwardRef(({className:e,...a},s)=>r.jsx("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:hidden",e),...a})).displayName="TableFooter";let n=t.forwardRef(({className:e,...a},s)=>r.jsx("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));n.displayName="TableRow";let c=t.forwardRef(({className:e,...a},s)=>r.jsx("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let m=t.forwardRef(({className:e,...a},s)=>r.jsx("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));m.displayName="TableCell",t.forwardRef(({className:e,...a},s)=>r.jsx("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},2771:(e,a,s)=>{var r,t,i,l,o,d;s.d(a,{UY:()=>o,XL:()=>i,bG:()=>t,gS:()=>l,i4:()=>d,iF:()=>r}),s(7577),function(e){e.PENDING_PAYMENT="PENDING_PAYMENT",e.PROCESSING="PROCESSING",e.SHIPPED="SHIPPED",e.DELIVERED="DELIVERED",e.CANCELLED="CANCELLED",e.REFUNDED="REFUNDED"}(r||(r={})),function(e){e.PENDING="PENDING",e.PAID="PAID",e.FAILED="FAILED",e.REFUNDED="REFUNDED"}(t||(t={})),function(e){e.CASH="CASH",e.DEBIT_CARD="DEBIT_CARD",e.CREDIT_CARD="CREDIT_CARD",e.BANK_TRANSFER="BANK_TRANSFER",e.OTHER="OTHER"}(i||(i={})),function(e){e.DRAFT="DRAFT",e.SENT="SENT",e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.EXPIRED="EXPIRED",e.INVOICED="INVOICED"}(l||(l={})),function(e){e.DRAFT="DRAFT",e.SENT="SENT",e.PAID="PAID",e.PARTIALLY_PAID="PARTIALLY_PAID",e.OVERDUE="OVERDUE",e.VOID="VOID",e.CANCELLED="CANCELLED"}(o||(o={})),function(e){e.ADMIN="ADMIN",e.EDITOR="EDITOR",e.VIEWER="VIEWER",e.CLIENT="CLIENT"}(d||(d={}))}};
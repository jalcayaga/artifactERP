(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{7397:function(e,r,t){Promise.resolve().then(t.bind(t,6374))},6374:function(e,r,t){"use strict";t.r(r);var a=t(7437),s=t(2265),o=t(2779),n=t(8685),i=t(8560),c=t(9376),l=t(7648);r.default=()=>{let[e,r]=(0,s.useState)(""),[t,u]=(0,s.useState)(""),[d,m]=(0,s.useState)(null),[f,h]=(0,s.useState)(!1),p=(0,o.a)(),x=(0,c.useRouter)(),g=async r=>{r.preventDefault(),m(null),h(!0);let a=await p.login({email:e,password:t});h(!1),a.success?x.push("/admin/dashboard"):m(a.error||"Failed to login. Please check your credentials.")},v="appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-muted-foreground focus:outline-none sm:text-sm transition-colors duration-150",w="border-border bg-background text-foreground focus:ring-ring focus:border-ring";return(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[(0,a.jsx)(i.kh,{className:"mx-auto h-12 w-auto text-primary"}),(0,a.jsxs)("h2",{className:"mt-6 text-3xl font-extrabold text-foreground",children:["Iniciar sesi\xf3n en ",n.Nv]}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["O"," ",(0,a.jsx)(l.default,{href:"/register",className:"font-medium text-primary hover:text-primary/80 dark:hover:text-primary/70",children:"crea una nueva cuenta"})]})]}),(0,a.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,a.jsx)("div",{className:"bg-card text-card-foreground py-8 px-4 shadow-subtle dark:shadow-md sm:rounded-lg sm:px-10 border",children:(0,a.jsxs)("form",{className:"space-y-6",onSubmit:g,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground",children:"Correo Electr\xf3nico"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>r(e.target.value),className:"".concat(v," ").concat(w)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground",children:"Contrase\xf1a"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:e=>u(e.target.value),className:"".concat(v," ").concat(w)})})]}),d&&(0,a.jsx)("div",{className:"rounded-md bg-destructive/10 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-destructive",children:d})})})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-primary-foreground bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 transition-colors",children:f?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})})]})})})]})}},2779:function(e,r,t){"use strict";t.d(r,{H:function(){return l},a:function(){return u}});var a=t(7437),s=t(2265),o=t(3464);let n="http://localhost:3001",i={login:async e=>{try{return(await o.Z.post("".concat(n,"/auth/login"),e)).data}catch(e){throw e}},register:async e=>{let r={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role};try{return(await o.Z.post("".concat(n,"/auth/register"),r)).data}catch(e){throw e}}},c=(0,s.createContext)(void 0),l=e=>{let{children:r}=e,[t,o]=(0,s.useState)(null),[n,l]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("wolfflow_token"),r=localStorage.getItem("wolfflow_user");if(e&&r){o(e);try{l(JSON.parse(r))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("wolfflow_user"),localStorage.removeItem("wolfflow_token"),o(null),l(null)}}d(!1)},[]);let m=async e=>{d(!0);try{let r=await i.login(e);if(r&&r.access_token&&r.user)return o(r.access_token),l(r.user),localStorage.setItem("wolfflow_token",r.access_token),localStorage.setItem("wolfflow_user",JSON.stringify(r.user)),d(!1),{success:!0};return d(!1),{success:!1,error:r.message||"Login failed: No token or user data received."}}catch(e){var r,t;return d(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during login."}}},f=async e=>{d(!0);try{let r=await i.register(e);if(r){let t=await m({email:e.email,password:e.password});return d(!1),{success:t.success,error:t.error,data:r}}return d(!1),{success:!0,data:r}}catch(e){var r,t;return d(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during registration."}}};return(0,a.jsx)(c.Provider,{value:{token:t,currentUser:n,isAuthenticated:!!t,isLoading:u,login:m,logout:()=>{d(!0),o(null),l(null),localStorage.removeItem("wolfflow_token"),localStorage.removeItem("wolfflow_user"),d(!1)},register:f},children:r})},u=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8685:function(e,r,t){"use strict";t.d(r,{N7:function(){return s},Nv:function(){return n},rJ:function(){return o}});var a=t(8560);let s=[{name:"Dashboard",path:"/admin/dashboard",icon:a.tv},{name:"Clientes/Proveedores",path:"/admin/clients",icon:a.Vp},{name:"Ventas",path:"/admin/sales",icon:a.Q1},{name:"Facturaci\xf3n",path:"/admin/invoices",icon:a.YH},{name:"Ingreso de Mercader\xeda",path:"/admin/purchases",icon:a.vx},{name:"\xd3rdenes de Compra",path:"/admin/purchase-orders",icon:a.Yw},{name:"Cotizaciones",path:"/admin/quotes",icon:a.YH},{name:"Productos/Servicios",path:"/admin/inventory",icon:a.vx},{name:"Finanzas",path:"/admin/finance",icon:a.ci},{name:"Reportes",path:"/admin/reports",icon:a.Np},{name:"Configuraci\xf3n",path:"/admin/settings",icon:a.IE}],o=[{name:"Inicio",path:"/"},{name:"Cat\xe1logo",path:"/products"},{name:"Servicios",path:"/#servicios"}],n="SubRed ERP"},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[3464,7648,8560,2971,2117,1744],function(){return e(e.s=7397)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9374],{2058:function(e,r,t){Promise.resolve().then(t.bind(t,8300))},8300:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(7437),o=t(2265),s=t(6070),n=t(8560),l=t(2779),i=()=>{let{currentUser:e}=(0,l.a)(),[r,t]=(0,o.useState)(!1),[i,c]=(0,o.useState)((null==e?void 0:e.firstName)||""),[d,u]=(0,o.useState)((null==e?void 0:e.lastName)||""),[m,f]=(0,o.useState)((null==e?void 0:e.email)||""),x=()=>t(!r),g="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm text-sm transition-colors duration-150 bg-background border-border placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring text-foreground disabled:opacity-70 disabled:bg-muted/50";return e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:"Perfil de Usuario"}),!r&&(0,a.jsxs)("button",{onClick:x,className:"bg-primary hover:bg-primary/90 text-primary-foreground font-medium py-2 px-4 rounded-lg shadow-sm flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(n.vd,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Editar Perfil"})]})]}),(0,a.jsx)(s.Zb,{className:"max-w-2xl border",children:(0,a.jsxs)(s.aY,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.aD,{className:"w-20 h-20 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-foreground",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.role})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"profile-firstName",className:"block text-sm font-medium text-foreground",children:"Nombre"}),(0,a.jsx)("input",{type:"text",id:"profile-firstName",value:i,onChange:e=>c(e.target.value),disabled:!r,className:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"profile-lastName",className:"block text-sm font-medium text-foreground",children:"Apellido"}),(0,a.jsx)("input",{type:"text",id:"profile-lastName",value:d,onChange:e=>u(e.target.value),disabled:!r,className:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"profile-email",className:"block text-sm font-medium text-foreground",children:"Correo Electr\xf3nico"}),(0,a.jsx)("input",{type:"email",id:"profile-email",value:m,onChange:e=>f(e.target.value),disabled:!0,className:g})," "]}),r&&(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 border border-border text-sm font-medium rounded-md text-foreground bg-background hover:bg-accent hover:text-accent-foreground transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{onClick:()=>{console.log("Saving profile:",{firstName:i,lastName:d,email:m}),t(!1)},className:"bg-primary hover:bg-primary/90 text-primary-foreground font-medium py-2 px-4 rounded-lg shadow-sm transition-colors",children:"Guardar Cambios"})]})]})}),(0,a.jsxs)(s.Zb,{className:"max-w-2xl border",children:[(0,a.jsx)(s.Ol,{children:(0,a.jsx)(s.ll,{className:"text-lg",children:"Seguridad"})}),(0,a.jsxs)(s.aY,{className:"pt-3",children:[(0,a.jsxs)("button",{className:"w-full text-left flex items-center p-3 -m-3 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[(0,a.jsx)(n.kh,{className:"w-5 h-5 mr-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-foreground",children:"Cambiar Contrase\xf1a"})]}),(0,a.jsx)("p",{className:"mt-2 text-xs text-muted-foreground italic",children:"(Funcionalidad de cambio de contrase\xf1a en desarrollo)"})]})]})]}):(0,a.jsxs)(s.Zb,{className:"border",children:[(0,a.jsx)(s.Ol,{children:(0,a.jsx)(s.ll,{children:"Perfil de Usuario"})}),(0,a.jsx)(s.aY,{children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No se pudo cargar la informaci\xf3n del usuario."})})]})};function c(){return(0,a.jsx)(i,{})}},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var a=t(7437),o=t(2265),s=t(4508);let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl bg-card text-card-foreground shadow-sm","border border-border","transition-all duration-200 ease-in-out","hover:shadow-lg dark:hover:shadow-primary/20","hover:border-border dark:hover:border-primary/40","dark:hover:bg-muted/20",t),...o})});n.displayName="Card";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-5",t),...o})});l.displayName="CardHeader";let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-xl font-semibold leading-none tracking-tight",t),...o})});i.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-5 pt-0",t),...o})});d.displayName="CardContent";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-5 pt-0",t),...o})});u.displayName="CardFooter"},2779:function(e,r,t){"use strict";t.d(r,{H:function(){return c},a:function(){return d}});var a=t(7437),o=t(2265),s=t(3464);let n="http://localhost:3001",l={login:async e=>{try{return(await s.Z.post("".concat(n,"/auth/login"),e)).data}catch(e){throw e}},register:async e=>{let r={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role};try{return(await s.Z.post("".concat(n,"/auth/register"),r)).data}catch(e){throw e}}},i=(0,o.createContext)(void 0),c=e=>{let{children:r}=e,[t,s]=(0,o.useState)(null),[n,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("wolfflow_token"),r=localStorage.getItem("wolfflow_user");if(e&&r){s(e);try{c(JSON.parse(r))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("wolfflow_user"),localStorage.removeItem("wolfflow_token"),s(null),c(null)}}u(!1)},[]);let m=async e=>{u(!0);try{let r=await l.login(e);if(r&&r.access_token&&r.user)return s(r.access_token),c(r.user),localStorage.setItem("wolfflow_token",r.access_token),localStorage.setItem("wolfflow_user",JSON.stringify(r.user)),u(!1),{success:!0};return u(!1),{success:!1,error:r.message||"Login failed: No token or user data received."}}catch(e){var r,t;return u(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during login."}}},f=async e=>{u(!0);try{let r=await l.register(e);if(r){let t=await m({email:e.email,password:e.password});return u(!1),{success:t.success,error:t.error,data:r}}return u(!1),{success:!0,data:r}}catch(e){var r,t;return u(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during registration."}}};return(0,a.jsx)(i.Provider,{value:{token:t,currentUser:n,isAuthenticated:!!t,isLoading:d,login:m,logout:()=>{u(!0),s(null),c(null),localStorage.removeItem("wolfflow_token"),localStorage.removeItem("wolfflow_user"),u(!1)},register:f},children:r})},d=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4508:function(e,r,t){"use strict";t.d(r,{LH:function(){return i},cn:function(){return s},eQ:function(){return n},fW:function(){return c},p6:function(){return l}});var a=t(1994),o=t(3335);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,a.W)(r))}function n(e){let r=Number(e);if(isNaN(r))return"$0";let t=Math.abs(r),a=(t%1).toFixed(2).substring(2),o=Math.trunc(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),s="$".concat(o);return"00"!==a&&(s+=",".concat(a)),r<0?"-".concat(s):s}function l(e){try{let r=new Date(e),t=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear();return"".concat(t,"/").concat(a,"/").concat(o)}catch(r){return console.error("Invalid date provided to formatDate:",e),"Fecha inv\xe1lida"}}function i(e){if("string"!=typeof e)return NaN;let r=parseFloat(e.replace(/\$\s?|(,*)/g,"").replace(/\./g,"").replace(",","."));return isNaN(r)?0:r}function c(e){if("string"!=typeof e||(e=e.replace(/\./g,"").replace(/-/g,"")).length<2)return!1;let r=e.slice(0,-1),t=e.slice(-1).toUpperCase(),a=0,o=2;for(let e=r.length-1;e>=0;e--)a+=parseInt(r[e],10)*o,++o>7&&(o=2);let s=11-a%11;return(11===s?"0":10===s?"K":s.toString())===t}}},function(e){e.O(0,[6137,3464,8560,2971,2117,1744],function(){return e(e.s=2058)}),_N_E=e.O()}]);
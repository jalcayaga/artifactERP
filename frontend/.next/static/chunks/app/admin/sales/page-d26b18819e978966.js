(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3603],{1360:function(e,t,a){Promise.resolve().then(a.bind(a,3634))},3634:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var s=a(7437),r=a(2265),n=a(9376),l=a(2779),o=a(6070),i=a(8560),c=a(3985),d=a(4508),u=a(9138),m=a(4038);let x={async getAllSales(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=await (0,m.Z)("/sales?page=".concat(e,"&limit=").concat(t));return{data:a.data,total:a.total,page:a.currentPage,limit:t,pages:a.pages}},getSaleById:async e=>(0,m.Z)("/sales/".concat(e)),createSale:async e=>(0,m.Z)("/sales",{method:"POST",body:JSON.stringify(e)})};var h=a(1441),p=a(5186),g=a(2869),f=a(6815),b=a(3647),j=a(4438),v=a(6110);let y=a(3464).Z.create({baseURL:"http://localhost:3001"});y.interceptors.request.use(e=>{let t=localStorage.getItem("wolfflow_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let N={getAllSuppliers:async()=>(await y.get("/companies",{params:{isSupplier:!0}})).data};var w=e=>{let{isOpen:t,onClose:a,onConfirm:n,stockInfo:l}=e,[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)("");return((0,r.useEffect)(()=>{t&&N.getAllSuppliers().then(e=>{c(e)})},[t]),t&&l)?(0,s.jsx)(v.Vq,{open:t,onOpenChange:a,children:(0,s.jsxs)(v.cZ,{"aria-describedby":"create-purchase-order-description",children:[(0,s.jsxs)(v.fK,{children:[(0,s.jsxs)(v.$N,{className:"flex items-center",children:[(0,s.jsx)(i.lM,{className:"w-6 h-6 mr-2 text-yellow-500"}),(0,s.jsx)("span",{children:"Stock Insuficiente"})]}),(0,s.jsxs)(v.Be,{id:"create-purchase-order-description",className:"pt-2",children:["No hay suficiente stock para el producto"," ",(0,s.jsx)("strong",{children:l.productName}),".",(0,s.jsx)("br",{}),"Necesitas ",(0,s.jsx)("strong",{children:l.quantityNeeded})," y solo hay"," ",(0,s.jsx)("strong",{children:l.quantityAvailable})," disponibles.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"\xbfDeseas crear una orden de compra para adquirir las unidades faltantes?"]})]}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("label",{htmlFor:"supplier-select",className:"block text-sm font-medium text-gray-700",children:"Proveedor"}),(0,s.jsxs)(b.Ph,{onValueChange:u,value:d,children:[(0,s.jsx)(b.i4,{id:"supplier-select",children:(0,s.jsx)(b.ki,{placeholder:"Seleccione un proveedor"})}),(0,s.jsx)(b.Bw,{children:o.map(e=>(0,s.jsx)(b.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)(v.cN,{children:[(0,s.jsx)(g.z,{variant:"ghost",onClick:a,children:"Cancelar"}),(0,s.jsx)(g.z,{onClick:()=>{if(!d){alert("Por favor, seleccione un proveedor.");return}let e=l.quantityNeeded-l.quantityAvailable;n(l.productId,e,d),a()},disabled:!d,children:"Crear Orden de Compra"})]})]})}):null},C=a(660),A=e=>{let{saleData:t,onSave:a,onCancel:n}=e,{token:m,currentUser:v}=(0,l.a)(),[y,N]=(0,r.useState)(""),[A,S]=(0,r.useState)([]),[k,P]=(0,r.useState)(new Date().toISOString().split("T")[0]),[E,I]=(0,r.useState)(""),[V,T]=(0,r.useState)([]),[z,D]=(0,r.useState)(""),[O,F]=(0,r.useState)([]),[Z,Q]=(0,r.useState)(null),[B,R]=(0,r.useState)([]),[_,q]=(0,r.useState)(""),[L,U]=(0,r.useState)(""),[M,G]=(0,r.useState)(null),[J,H]=(0,r.useState)({}),[W,Y]=(0,r.useState)({}),[X,K]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(null),es=(0,r.useMemo)(()=>!!t,[t]);(0,r.useEffect)(()=>{m&&h.J.getAllCompanies().then(e=>{Array.isArray(e)?S(e.filter(e=>e.isClient)):S(e.data.filter(e=>e.isClient))}).catch(e=>console.error("Error fetching companies:",e))},[m]),(0,r.useEffect)(()=>{t?(N(t.companyId),P(new Date(t.createdAt).toISOString().split("T")[0]),I(t.customerNotes||"")):(N(""),P(new Date().toISOString().split("T")[0]),I("")),T([]),H({}),Y({}),D(""),F([]),Q(null),R([]),q(""),U(""),G(null)},[t,v]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{z.length>2&&m?u.M.searchProducts(m,z).then(e=>F(e.data)).catch(e=>console.error("Error searching products:",e)):F([])},300);return()=>clearTimeout(e)},[z,m]);let er=(0,r.useCallback)(async e=>{if(Q(e),D(e.name),F([]),U(e.price.toString()),G(null),"PRODUCT"===e.productType&&m)try{let t=await u.M.getProductLots(e.id,m);R(t)}catch(e){console.error("Error fetching product lots:",e),j.Am.error("Error al cargar los lotes del producto."),R([])}else R([])},[m]),{subTotal:en,totalVatAmount:el,grandTotal:eo}=(0,r.useMemo)(()=>{let e=V.reduce((e,t)=>e+parseFloat(t.totalPrice.toString()),0),t=V.reduce((e,t)=>e+parseFloat(t.itemVatAmount.toString()),0);return{subTotal:e,totalVatAmount:t,grandTotal:e+t}},[V]),ei=()=>{let e={};Z||(e.product="Debe seleccionar un producto.");let t=parseFloat(_);(isNaN(t)||t<=0)&&(e.quantity="La cantidad debe ser un n\xfamero positivo.");let a=parseFloat(L);return(isNaN(a)||a<0)&&(e.price="El precio debe ser un n\xfamero positivo o cero."),(null==Z?void 0:Z.productType)!=="PRODUCT"||M||(e.lot="Debe seleccionar un lote para productos f\xedsicos."),Y(e),0===Object.keys(e).length},ec=(0,r.useCallback)(()=>{if(!ei()||!Z)return;let e=parseFloat(_),t=parseFloat(L),a=e*t,s=.19*a,r={productId:Z.id,quantity:e,unitPrice:t,totalPrice:a,itemVatAmount:s,totalPriceWithVat:a+s};T(e=>[...e,r]),D(""),Q(null),R([]),q(""),U(""),G(null),Y({})},[Z,_,L,M]),ed=(0,r.useCallback)(e=>{T(t=>t.filter((t,a)=>a!==e))},[]),eu=()=>{let e={};return y||(e.selectedCompanyId="Debe seleccionar un cliente."),k||(e.saleDate="La fecha de venta es requerida."),0===V.length&&(e.items="Debe a\xf1adir al menos un art\xedculo a la venta."),H(e),0===Object.keys(e).length},em=async e=>{if(e.preventDefault(),eu()){if(!(null==v?void 0:v.id)){j.Am.error("No se pudo determinar el usuario actual.");return}K(!0);try{let e={userId:v.id,companyId:y,status:(null==t?void 0:t.status)||c.iF.PENDING_PAYMENT,paymentStatus:(null==t?void 0:t.paymentStatus)||c.bG.PENDING,subTotalAmount:en,vatAmount:el,vatRatePercent:19,discountAmount:0,shippingAmount:0,grandTotalAmount:eo,currency:"CLP",shippingAddress:(null==t?void 0:t.shippingAddress)||void 0,billingAddress:(null==t?void 0:t.billingAddress)||void 0,customerNotes:E.trim()||void 0,paymentMethod:(null==t?void 0:t.paymentMethod)||void 0,items:V.map(e=>({...e,unitPrice:e.unitPrice,totalPrice:e.totalPrice,itemVatAmount:e.itemVatAmount,totalPriceWithVat:e.totalPriceWithVat}))},s=await x.createSale(e);j.Am.success("Venta ".concat(s.id.substring(0,8),"... creada exitosamente.")),a(s)}catch(e){var s,r;console.error("Error creating sale:",e),(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.errorCode)==="OUT_OF_STOCK"?(ea(e.response.data),ee(!0)):j.Am.error(e.message||"Error al crear la venta.")}finally{K(!1)}}},ex=async(e,t,a)=>{try{let s=await C.B.createPurchase({companyId:a,status:"PENDING",items:[{productId:e,quantity:t,unitPrice:0,totalPrice:0,itemVatAmount:0,totalPriceWithVat:0}],subTotalAmount:0,totalVatAmount:0,grandTotal:0,purchaseDate:new Date().toISOString()});j.Am.success("Orden de compra creada: ".concat(s.id))}catch(e){console.error("Error creating purchase order:",e),j.Am.error("Error al crear la orden de compra.")}},eh="mt-1 text-xs text-destructive";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Zb,{className:"max-w-4xl mx-auto border",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{className:"text-xl",children:es?"Editar Venta: ".concat(null==t?void 0:t.id.substring(0,8),"..."):"Crear Nueva Venta"})}),(0,s.jsxs)("form",{onSubmit:em,children:[(0,s.jsxs)(o.aY,{className:"space-y-6 pt-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(f._,{htmlFor:"client-select",children:["Cliente ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)(b.Ph,{onValueChange:N,value:y,children:[(0,s.jsx)(b.i4,{id:"client-select",children:(0,s.jsx)(b.ki,{placeholder:"Selecciona un cliente"})}),(0,s.jsx)(b.Bw,{children:A.map(e=>(0,s.jsxs)(b.Ql,{value:e.id,children:[e.name," ",e.email?"(".concat(e.email,")"):""]},e.id))})]}),J.selectedCompanyId&&(0,s.jsx)("p",{id:"client-error",className:eh,children:J.selectedCompanyId})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(f._,{htmlFor:"sale-date",children:["Fecha de Venta ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(p.I,{type:"date",id:"sale-date",value:k,onChange:e=>P(e.target.value),"aria-describedby":"saleDate-error"}),J.saleDate&&(0,s.jsx)("p",{id:"saleDate-error",className:eh,children:J.saleDate})]})]}),(0,s.jsxs)("div",{className:"space-y-4 p-4 border border-border rounded-md bg-card",children:[(0,s.jsxs)("h3",{className:"text-md font-semibold text-foreground",children:["Art\xedculos de la Venta (IVA ",19,"%)"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-4 items-end",children:[(0,s.jsxs)("div",{className:"sm:col-span-5 relative",children:[(0,s.jsx)(f._,{htmlFor:"product-search",className:"block text-xs font-medium text-muted-foreground",children:"Buscar Producto"}),(0,s.jsx)(p.I,{id:"product-search",type:"text",value:z,onChange:e=>D(e.target.value),placeholder:"Escribe para buscar productos...",className:"pr-10"}),(0,s.jsx)(i.W1,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),O.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full bg-popover border border-border rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:O.map(e=>(0,s.jsxs)("div",{className:"px-3 py-2 hover:bg-accent cursor-pointer text-sm",onClick:()=>er(e),children:[e.name," ",e.sku?"(".concat(e.sku,")"):""," - ",(0,d.eQ)(e.price)]},e.id))}),W.product&&(0,s.jsx)("p",{className:eh,children:W.product})]}),Z&&(0,s.jsxs)("div",{className:"sm:col-span-7 grid grid-cols-1 sm:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)(f._,{htmlFor:"item-quantity",className:"block text-xs font-medium text-muted-foreground",children:"Cant."}),(0,s.jsx)(p.I,{type:"number",id:"item-quantity",value:_,onChange:e=>q(e.target.value),placeholder:"0"}),W.quantity&&(0,s.jsx)("p",{className:eh,children:W.quantity})]}),(0,s.jsxs)("div",{className:"sm:col-span-3",children:[(0,s.jsx)(f._,{htmlFor:"item-price",className:"block text-xs font-medium text-muted-foreground",children:"P. Unit. Venta (sin IVA)"}),(0,s.jsx)(p.I,{type:"number",id:"item-price",value:L,onChange:e=>U(e.target.value),placeholder:"0.00",step:"0.01"}),W.price&&(0,s.jsx)("p",{className:eh,children:W.price})]}),"PRODUCT"===Z.productType&&B.length>0&&(0,s.jsxs)("div",{className:"sm:col-span-5",children:[(0,s.jsx)(f._,{htmlFor:"lot-select",className:"block text-xs font-medium text-muted-foreground",children:"Seleccionar Lote (Precio Compra)"}),(0,s.jsxs)(b.Ph,{onValueChange:G,value:M||"",children:[(0,s.jsx)(b.i4,{id:"lot-select",children:(0,s.jsx)(b.ki,{placeholder:"Selecciona un lote"})}),(0,s.jsx)(b.Bw,{children:B.map(e=>(0,s.jsxs)(b.Ql,{value:e.id,children:["Lote: ",e.lotNumber," - Cant: ",e.currentQuantity," - Compra: ",(0,d.eQ)(e.purchasePrice)]},e.id))})]}),W.lot&&(0,s.jsx)("p",{className:eh,children:W.lot})]}),(0,s.jsx)("div",{className:"sm:col-span-5",children:(0,s.jsxs)(g.z,{type:"button",onClick:ec,className:"w-full",children:[(0,s.jsx)(i.pO,{className:"w-4 h-4 mr-2"})," A\xf1adir Art\xedculo"]})})]})]}),V.length>0?(0,s.jsx)("div",{className:"mt-4 -mx-4 sm:mx-0 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-border",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Producto / Servicio"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Cant."}),(0,s.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"P.Unit (s/IVA)"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Subtotal (s/IVA)"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider hidden sm:table-cell",children:"IVA Item"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-muted-foreground uppercase tracking-wider"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:V.map((e,t)=>(0,s.jsxs)("tr",{children:[" ",(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-foreground",children:e.productId})," ",(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-muted-foreground text-right",children:e.quantity}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-muted-foreground text-right",children:(0,d.eQ)(e.unitPrice)}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-foreground font-medium text-right",children:(0,d.eQ)(e.totalPrice)}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-muted-foreground text-right hidden sm:table-cell",children:(0,d.eQ)(e.itemVatAmount)}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>ed(t),title:"Eliminar Art\xedculo",className:"text-destructive hover:text-destructive/80 p-1 rounded-md hover:bg-destructive/10 transition-colors",children:(0,s.jsx)(i.XH,{className:"w-4 h-4"})})})]},t))})]})}):(0,s.jsx)("p",{className:"text-sm text-center text-muted-foreground italic py-3",children:"A\xfan no se han a\xf1adido art\xedculos a la venta."}),J.items&&(0,s.jsx)("p",{className:eh+" text-center",children:J.items})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-border space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-end items-center",children:[(0,s.jsx)("span",{className:"text-md font-medium text-muted-foreground",children:"Subtotal (sin IVA):"}),(0,s.jsx)("span",{className:"ml-4 text-md font-semibold text-foreground w-32 text-right",children:(0,d.eQ)(en)})]}),(0,s.jsxs)("div",{className:"flex justify-end items-center",children:[(0,s.jsxs)("span",{className:"text-md font-medium text-muted-foreground",children:["IVA (",19,"%):"]}),(0,s.jsx)("span",{className:"ml-4 text-md font-semibold text-foreground w-32 text-right",children:(0,d.eQ)(el)})]}),(0,s.jsxs)("div",{className:"flex justify-end items-center mt-1 pt-1 border-t border-border/50",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-foreground",children:"Total Venta:"}),(0,s.jsx)("span",{className:"ml-4 text-2xl font-bold text-primary w-32 text-right",children:(0,d.eQ)(eo)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f._,{htmlFor:"sale-observations",children:"Observaciones"}),(0,s.jsx)("textarea",{id:"sale-observations",value:E,onChange:e=>I(e.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm text-sm transition-colors duration-150 bg-background border-border placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring text-foreground",placeholder:"A\xf1adir notas adicionales sobre la venta..."})]})]}),(0,s.jsxs)(o.eW,{className:"flex flex-col sm:flex-row justify-end items-center gap-3 pt-6",children:[(0,s.jsx)(g.z,{type:"button",variant:"outline",onClick:n,className:"w-full sm:w-auto order-2 sm:order-1",children:"Cancelar"}),(0,s.jsx)(g.z,{type:"submit",className:"w-full sm:w-auto order-1 sm:order-2",disabled:X,children:X?"Guardando...":es?"Actualizar Venta":"Guardar Venta"})]})]})]}),(0,s.jsx)(w,{isOpen:$,onClose:()=>ee(!1),onConfirm:ex,stockInfo:et})]})},S=a(3713);let k=e=>{let{label:t,value:a,icon:r}=e;return a||"object"==typeof a||"boolean"==typeof a||"number"==typeof a?(0,s.jsxs)("div",{className:"flex items-start py-1.5",children:[r&&(0,s.jsx)(r,{className:"w-5 h-5 mr-2.5 mt-0.5 text-muted-foreground opacity-80 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("dt",{className:"text-xs font-medium text-muted-foreground",children:t}),(0,s.jsx)("dd",{className:"text-sm text-foreground",children:a||(0,s.jsx)("span",{className:"italic",children:"N/A"})})]})]}):null};var P=e=>{var t,a;let{sale:n,onClose:l,onInvoiceCreated:o}=e,[c,u]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(!n)return;let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[n,l]),!n)return null;let m=async()=>{if(n){u(!0);try{await S.q.createInvoiceFromOrder(n.id),j.Am.success("Factura creada exitosamente"),o(),l()}catch(e){j.Am.error(e.message||"Error al crear la factura")}finally{u(!1)}}},x=e=>e.totalPrice+e.itemVatAmount;return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 dark:bg-black/75 p-4 transition-opacity duration-300 ease-in-out",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"sale-detail-modal-title",children:(0,s.jsxs)("div",{className:"bg-card text-card-foreground rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden border border-border",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border",children:[(0,s.jsxs)("h2",{id:"sale-detail-modal-title",className:"text-lg sm:text-xl font-semibold text-foreground flex items-center",children:[(0,s.jsx)(i.Q1,{className:"w-6 h-6 mr-2 text-primary"}),"Detalle de Venta (ID: ",n.id.substring(0,8),"...)"]}),(0,s.jsx)("button",{onClick:l,className:"p-1.5 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors","aria-label":"Cerrar modal",children:(0,s.jsx)(i.b0,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-4 sm:p-5 space-y-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 mb-3",children:[(0,s.jsx)(k,{label:"Empresa",value:null===(t=n.company)||void 0===t?void 0:t.name}),(0,s.jsx)(k,{label:"Fecha de Venta",value:new Date(n.createdAt).toLocaleDateString(),icon:i.Qu}),n.customerNotes&&(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(k,{label:"Observaciones",value:n.customerNotes,icon:i.Zw})})]}),(0,s.jsx)("h3",{className:"text-md font-semibold text-foreground mb-1.5",children:"Art\xedculos"}),(0,s.jsx)("div",{className:"overflow-x-auto border border-border rounded-md",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-border",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Producto / Servicio"}),(0,s.jsx)("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Cant."}),(0,s.jsx)("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider hidden sm:table-cell",children:"P.Unit (s/IVA)"}),(0,s.jsx)("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Subtotal (s/IVA)"}),(0,s.jsxs)("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:["IVA (",n.vatRatePercent,"%)"]}),(0,s.jsx)("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Total Item"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border",children:null===(a=n.orderItems)||void 0===a?void 0:a.map(e=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm text-foreground",children:null===(t=e.product)||void 0===t?void 0:t.name}),(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm text-muted-foreground text-right",children:e.quantity}),(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm text-muted-foreground text-right hidden sm:table-cell",children:(0,d.eQ)(e.unitPrice)}),(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm text-foreground text-right",children:(0,d.eQ)(e.totalPrice)}),(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm text-muted-foreground text-right hidden md:table-cell",children:(0,d.eQ)(e.itemVatAmount)}),(0,s.jsx)("td",{className:"px-3 py-2.5 whitespace-nowrap text-sm font-medium text-foreground text-right",children:(0,d.eQ)(x(e))})]},e.id)})})]})}),(0,s.jsxs)("div",{className:"mt-4 pt-3 border-t border-border space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Subtotal (sin IVA):"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-foreground",children:(0,d.eQ)(n.subTotalAmount)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["Total IVA (",n.vatRatePercent,"%):"]}),(0,s.jsx)("span",{className:"text-sm font-semibold text-foreground",children:(0,d.eQ)(n.vatAmount)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-1.5 border-t border-border/50",children:[(0,s.jsx)("span",{className:"text-md font-bold text-foreground",children:"Gran Total:"}),(0,s.jsx)("span",{className:"text-lg font-bold text-primary",children:(0,d.eQ)(n.grandTotalAmount)})]})]})]}),(0,s.jsxs)("div",{className:"px-4 py-3 sm:p-4 bg-muted/50 border-t border-border flex justify-end space-x-2",children:[(0,s.jsx)(g.z,{type:"button",onClick:l,variant:"outline",children:"Cerrar"}),(0,s.jsx)(g.z,{type:"button",onClick:m,disabled:c,children:c?"Creando Factura...":"Crear Factura"})]})]})})},E=a(1944),I=a(3578),V=()=>{var e;let{isAuthenticated:t,currentUser:a,isLoading:u}=(0,l.a)(),m=(0,n.useRouter)(),[h,p]=(0,r.useState)(!1),[f,b]=(0,r.useState)([]),[v,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[V,T]=(0,r.useState)(null),[z,D]=(0,r.useState)(!0),[O,F]=(0,r.useState)(null),[Z,Q]=(0,r.useState)(1),[B,R]=(0,r.useState)(1),[_,q]=(0,r.useState)(0),L=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!t||(null==a?void 0:a.role)!==c.i4.ADMIN&&(null==a?void 0:a.role)!==c.i4.EDITOR&&(null==a?void 0:a.role)!==c.i4.VIEWER){F("No autorizado para ver esta p\xe1gina o no autenticado."),D(!1),t||m.push("/login");return}D(!0);try{let t=await x.getAllSales(e);b(t.data),R(t.pages),Q(t.page),q(t.total)}catch(e){console.error("Error fetching sales:",e),e.message&&e.message.includes("Unauthorized")?m.push("/login"):F("Error al cargar las ventas.")}finally{D(!1)}},[t,a,m]);(0,r.useEffect)(()=>{u||L(Z)},[L,Z,u]);let U=(0,r.useCallback)(()=>{w(null),p(!0)},[]),M=(0,r.useCallback)(e=>{w(e),p(!0)},[]),G=(0,r.useCallback)(e=>{T(e),k(!0)},[]),J=(0,r.useCallback)(async()=>{if(V)try{L(Z),T(null),k(!1)}catch(e){console.error("Error deleting sale:",e),e.message&&e.message.includes("Unauthorized")?m.push("/login"):F("Error al eliminar la venta.")}},[V,L,Z,m]),H=(0,r.useCallback)(()=>{T(null),k(!1)},[]),W=(0,r.useCallback)(async e=>{try{p(!1),w(null),L(Z)}catch(e){console.error("Error saving sale:",e),e.message&&e.message.includes("Unauthorized")?m.push("/login"):F("Error al guardar la venta.")}},[L,Z,m]),Y=(0,r.useCallback)(()=>{p(!1),w(null)},[]),X=(0,r.useCallback)(e=>{y(e)},[]),K=(0,r.useCallback)(()=>{y(null)},[]),$=e=>{Q(e)},ee=async e=>{try{let t=await S.q.createInvoiceFromOrder(e);j.Am.success("Factura ".concat(t.invoiceNumber," creada exitosamente.")),L(Z)}catch(e){var t,a;console.error("Error creating invoice:",e),j.Am.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Error al crear la factura.")}};return u?(0,s.jsx)("div",{className:"text-center py-8",children:"Cargando autenticaci\xf3n..."}):z?(0,s.jsx)("div",{className:"text-center py-8",children:"Cargando ventas..."}):O?(0,s.jsx)("div",{className:"text-center py-8 text-destructive",children:O}):t&&((null==a?void 0:a.role)===c.i4.ADMIN||(null==a?void 0:a.role)===c.i4.EDITOR||(null==a?void 0:a.role)===c.i4.VIEWER)?h?(0,s.jsx)(A,{saleData:N,onSave:W,onCancel:Y}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-semibold text-foreground",children:"Gesti\xf3n de Ventas"}),(0,s.jsxs)(g.z,{className:"w-full sm:w-auto",onClick:U,children:[(0,s.jsx)(i.pO,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{children:"Crear Nueva Venta"})]})]}),(0,s.jsx)(o.Zb,{className:"overflow-hidden border",children:(0,s.jsx)(o.aY,{className:"p-0",children:f.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(I.iA,{children:[(0,s.jsx)(I.xD,{className:"bg-muted/50",children:(0,s.jsxs)(I.SC,{children:[(0,s.jsx)(I.ss,{children:"ID Venta"}),(0,s.jsx)(I.ss,{children:"Empresa"}),(0,s.jsx)(I.ss,{className:"hidden sm:table-cell",children:"Fecha"}),(0,s.jsx)(I.ss,{className:"hidden md:table-cell text-right",children:"Subtotal"}),(0,s.jsx)(I.ss,{className:"hidden lg:table-cell text-right",children:"IVA"}),(0,s.jsx)(I.ss,{className:"text-right",children:"Total"}),(0,s.jsx)(I.ss,{className:"text-center",children:"Acciones"})]})}),(0,s.jsx)(I.RM,{children:f.map(e=>{var t;return(0,s.jsxs)(I.SC,{className:"hover:bg-accent transition-colors duration-150",children:[(0,s.jsxs)(I.pj,{className:"font-mono text-muted-foreground",children:[e.id.substring(0,8),"..."]}),(0,s.jsxs)(I.pj,{children:[(0,s.jsx)("div",{className:"font-medium text-foreground",children:null===(t=e.company)||void 0===t?void 0:t.name}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground sm:hidden",children:[new Date(e.createdAt).toLocaleDateString()," - Total: ",(0,d.eQ)(e.grandTotalAmount)]})]}),(0,s.jsx)(I.pj,{className:"hidden sm:table-cell text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)(I.pj,{className:"hidden md:table-cell text-muted-foreground text-right",children:(0,d.eQ)(e.subTotalAmount)}),(0,s.jsx)(I.pj,{className:"hidden lg:table-cell text-muted-foreground text-right",children:(0,d.eQ)(e.vatAmount)}),(0,s.jsx)(I.pj,{className:"font-semibold text-primary text-right",children:(0,d.eQ)(e.grandTotalAmount)}),(0,s.jsx)(I.pj,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[(0,s.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>X(e),title:"Ver Detalles de Venta","aria-label":"Ver detalles de venta ".concat(e.id.substring(0,8)),children:(0,s.jsx)(i.tE,{className:"w-5 h-5"})}),(0,s.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>M(e),title:"Editar Venta","aria-label":"Editar venta ".concat(e.id.substring(0,8)),children:(0,s.jsx)(i.vd,{className:"w-5 h-5"})}),(0,s.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>G(e),title:"Eliminar Venta","aria-label":"Eliminar venta ".concat(e.id.substring(0,8)),children:(0,s.jsx)(i.XH,{className:"w-5 h-5"})}),(e.status===c.iF.DELIVERED||e.status===c.iF.SHIPPED)&&!e.invoice&&(0,s.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>ee(e.id),title:"Generar Factura","aria-label":"Generar factura para la venta ".concat(e.id.substring(0,8)),children:(0,s.jsx)(i.YH,{className:"w-5 h-5"})})]})})]},e.id)})})]})}):(0,s.jsxs)("div",{className:"text-center py-12 px-4",children:[(0,s.jsx)(i.Q1,{className:"mx-auto h-16 w-16 text-muted-foreground opacity-40"}),(0,s.jsx)("h3",{className:"mt-3 text-xl font-semibold text-foreground",children:"No hay ventas registradas"}),(0,s.jsx)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:"Comienza creando una nueva venta para verla listada aqu\xed."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)(g.z,{type:"button",onClick:U,children:[(0,s.jsx)(i.pO,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{children:"Crear Primera Venta"})]})})]})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",Z," de ",B," (Total: ",_," ventas)"]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>$(Z-1),disabled:Z<=1,children:"Anterior"}),(0,s.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>$(Z+1),disabled:Z>=B,children:"Siguiente"})]})]})]}),v&&(0,s.jsx)(P,{sale:v,onClose:K,onInvoiceCreated:()=>L(Z)}),C&&V&&(0,s.jsx)(E.Z,{isOpen:C,onClose:H,onConfirm:J,title:"Confirmar Eliminaci\xf3n de Venta",message:(0,s.jsxs)(s.Fragment,{children:["\xbfEst\xe1s seguro de que quieres eliminar la venta ",(0,s.jsxs)("strong",{children:["ID: ",V.id.substring(0,8),"..."]})," para la empresa ",(0,s.jsx)("strong",{children:null===(e=V.company)||void 0===e?void 0:e.name}),"? Esta acci\xf3n no se puede deshacer."]}),confirmText:"Eliminar Venta",confirmButtonClass:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",icon:(0,s.jsx)(i.XH,{className:"w-5 h-5 mr-2"})})]}):(0,s.jsx)("div",{className:"text-center py-8 text-destructive",children:"Acceso denegado. No tienes permisos suficientes."})};function T(){return(0,s.jsx)(V,{})}},1944:function(e,t,a){"use strict";var s=a(7437),r=a(2265),n=a(8560);t.Z=e=>{let{isOpen:t,onClose:a,onConfirm:l,title:o,message:i,confirmText:c="Confirmar",cancelText:d="Cancelar",confirmButtonClass:u="bg-primary hover:bg-primary/90 text-primary-foreground",icon:m}=e;return((0,r.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]),t)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 dark:bg-black/75 p-4 transition-opacity duration-300 ease-in-out",onClick:a,role:"alertdialog","aria-modal":"true","aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-message",children:(0,s.jsxs)("div",{className:"bg-card text-card-foreground rounded-lg shadow-xl w-full max-w-md flex flex-col overflow-hidden border border-border",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border",children:[(0,s.jsxs)("h2",{id:"confirmation-modal-title",className:"text-lg sm:text-xl font-semibold text-foreground flex items-center",children:[m&&(0,s.jsx)("span",{className:"mr-2",children:m})," ",o," "]}),(0,s.jsxs)("button",{onClick:a,className:"p-1.5 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors","aria-label":"Cerrar modal",children:[(0,s.jsx)(n.b0,{className:"w-5 h-5"})," "]})]}),(0,s.jsx)("div",{className:"p-4 sm:p-5",children:(0,s.jsxs)("p",{id:"confirmation-modal-message",className:"text-sm text-foreground",children:[i," "]})}),(0,s.jsxs)("div",{className:"px-4 py-3 sm:p-5 bg-muted/50 border-t border-border flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0 space-y-reverse",children:[(0,s.jsxs)("button",{type:"button",onClick:a,className:"w-full sm:w-auto justify-center px-4 py-2.5 border border-border text-sm font-medium rounded-md text-foreground bg-background hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-ring dark:focus:ring-offset-card transition-colors duration-150",children:[d," "]}),(0,s.jsxs)("button",{type:"button",onClick:l,className:"w-full sm:w-auto justify-center px-4 py-2.5 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-card transition-colors duration-150 ".concat(u," focus:ring-current"),children:[c," "]})]})]})}):null}},3647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return m},Ph:function(){return c},Ql:function(){return x},i4:function(){return u},ki:function(){return d}});var s=a(7437),r=a(2265),n=a(8238),l=a(875),o=a(401),i=a(4508);let c=n.fC;n.ZA;let d=n.B4,u=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(n.xz,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[r,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.xz.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...o}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:(0,s.jsx)(n.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});m.displayName=n.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.__.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:r})]})});x.displayName=n.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.Z0.displayName},9116:function(e,t,a){"use strict";a.d(t,{h:function(){return n}});var s=a(3464);let r=()=>localStorage.getItem("wolfflow_token"),n=s.Z.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r();return console.log("Auth Token being sent:",t),t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e))},4038:function(e,t,a){"use strict";var s=a(9116);async function r(e,t){try{let a={};return(null==t?void 0:t.headers)&&(t.headers instanceof Headers?t.headers.forEach((e,t)=>{a[t]=e}):Array.isArray(t.headers)?t.headers.forEach(e=>{let[t,s]=e;a[t]=s}):Object.assign(a,t.headers)),(await (0,s.h)(e,{method:(null==t?void 0:t.method)||"GET",data:null==t?void 0:t.body,headers:a})).data}catch(e){if(e.response)throw Error(e.response.data.message||e.response.statusText);if(e.request)throw Error("No response received from server.");throw Error(e.message)}}t.Z=r},1441:function(e,t,a){"use strict";a.d(t,{J:function(){return r}});var s=a(4038);let r={async getAllCompanies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new URLSearchParams({page:e.toString(),limit:t.toString()});return a.isClient&&r.append("isClient","true"),a.isSupplier&&r.append("isSupplier","true"),(0,s.Z)("/companies?".concat(r.toString()))},getCompanyById:async e=>(0,s.Z)("/companies/".concat(e)),createCompany:async e=>await (0,s.Z)("/companies",{method:"POST",body:JSON.stringify(e)}),updateCompany:async(e,t)=>await (0,s.Z)("/companies/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),async deleteCompany(e){await (0,s.Z)("/companies/".concat(e),{method:"DELETE"})}}},3713:function(e,t,a){"use strict";a.d(t,{q:function(){return r}});var s=a(4038);let r={createInvoiceFromOrder:async e=>(0,s.Z)("/invoices",{method:"POST",body:JSON.stringify({orderId:e})}),async getAllInvoices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,r=new URLSearchParams({page:e.toString(),limit:t.toString()});a&&r.append("status",a);let n=await (0,s.Z)("/invoices?".concat(r.toString()));return{data:n.data,total:n.total,page:n.currentPage,limit:t,pages:n.pages}},getInvoiceById:async e=>(0,s.Z)("/invoices/".concat(e)),getInvoicePdf:async e=>(0,s.Z)("/invoices/".concat(e,"/pdf"))}},9138:function(e,t,a){"use strict";a.d(t,{M:function(){return r}});var s=a(9116);let r={async getAllProducts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await s.h.get("/products",{params:{page:t,limit:a},headers:{Authorization:"Bearer ".concat(e)}})).data},async searchProducts(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(await s.h.get("/products/search",{params:{term:t,page:a,limit:r},headers:{Authorization:"Bearer ".concat(e)}})).data},async getPublishedProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;return(await s.h.get("/products/published",{params:{page:e,limit:t,category:a,searchQuery:r,minPrice:n,maxPrice:l}})).data},getPublishedProductById:async e=>(await s.h.get("/products/published/".concat(e))).data,getProductLots:async(e,t)=>(await s.h.get("/products/".concat(e,"/lots"),{headers:{Authorization:"Bearer ".concat(t)}})).data,getAverageCost:async(e,t)=>(await s.h.get("/products/".concat(e,"/average-cost"),{headers:{Authorization:"Bearer ".concat(t)}})).data,createProduct:async(e,t)=>(await s.h.post("/products",e,{headers:{Authorization:"Bearer ".concat(t)}})).data,updateProduct:async(e,t,a)=>(await s.h.patch("/products/".concat(e),t,{headers:{Authorization:"Bearer ".concat(a)}})).data,async deleteProduct(e,t){await s.h.delete("/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})},async uploadTechnicalSheet(e,t,a){let r=new FormData;return r.append("file",t),(await s.h.post("/products/".concat(e,"/technical-sheet"),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})).data},deleteTechnicalSheet:async(e,t)=>(await s.h.delete("/products/".concat(e,"/technical-sheet"),{headers:{Authorization:"Bearer ".concat(t)}})).data}},660:function(e,t,a){"use strict";a.d(t,{B:function(){return r}});var s=a(4038);let r={async getAllPurchases(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=await (0,s.Z)("/purchases?page=".concat(e,"&limit=").concat(t));return{data:a.data,total:a.total,page:a.currentPage,limit:t,pages:a.pages}},getPurchaseById:async e=>(0,s.Z)("/purchases/".concat(e)),createPurchase:async e=>(0,s.Z)("/purchases",{method:"POST",body:JSON.stringify(e)}),updatePurchase:async(e,t)=>(0,s.Z)("/purchases/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),async deletePurchase(e){await (0,s.Z)("/purchases/".concat(e),{method:"DELETE"})}}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[6137,3464,3937,9432,9008,4438,8560,9479,2971,2117,1744],function(){return e(e.s=1360)}),_N_E=e.O()}]);
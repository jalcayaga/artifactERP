(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{1135:function(e,r,t){Promise.resolve().then(t.bind(t,2108))},2108:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var a=t(7437),s=t(2265),n=t(2779),o=t(9376),l=t(7648),c=t(8560),i=e=>{let{navItems:r,appName:t,isMobileOpen:s,setMobileOpen:n,isCollapsed:i,toggleCollapsed:d}=e,u=(0,o.usePathname)(),m=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center mb-8 px-4 ".concat(i?"justify-center":"justify-between"),children:[!i&&(0,a.jsx)(l.default,{href:"/admin/dashboard",className:"text-2xl font-bold text-primary",onClick:()=>n(!1),children:t}),(0,a.jsx)("button",{onClick:d,className:"hidden md:block p-1 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors","aria-label":i?"Expandir barra lateral":"Colapsar barra lateral",children:i?(0,a.jsx)(c.XC,{className:"w-6 h-6"}):(0,a.jsx)(c.wy,{className:"w-6 h-6"})}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"md:hidden p-1 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors","aria-label":"Cerrar barra lateral",children:(0,a.jsx)(c.b0,{className:"w-6 h-6"})})]}),(0,a.jsx)("nav",{className:"flex-grow",children:(0,a.jsx)("ul",{children:r.map(e=>(0,a.jsx)("li",{className:"mb-1",children:(0,a.jsxs)(l.default,{href:e.path,onClick:()=>n(!1),className:"w-full flex items-center py-3 px-4 rounded-md transition-all duration-200 ease-in-out\n                            ".concat(u===e.path?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:bg-accent hover:text-accent-foreground","\n                            ").concat(i?"justify-center":""),"aria-current":u===e.path?"page":void 0,children:[(0,a.jsx)(e.icon,{className:"w-6 h-6 ".concat(i?"":"mr-3"," flex-shrink-0")}),!i&&(0,a.jsx)("span",{className:"font-medium",children:e.name})]})},e.path))})})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-40 flex md:hidden transition-transform duration-300 ease-in-out \n                    ".concat(s?"translate-x-0":"-translate-x-full"),role:"dialog","aria-modal":"true","aria-hidden":!s,children:[(0,a.jsx)("div",{className:"w-64 bg-card text-card-foreground flex flex-col p-4 shadow-lg border-r border-border",children:m}),(0,a.jsx)("div",{className:"flex-1 bg-black/50",onClick:()=>n(!1),"aria-hidden":"true"})]}),(0,a.jsx)("aside",{className:"hidden md:flex flex-col bg-card text-card-foreground p-4 shadow-lg border-r border-border transition-all duration-300 ease-in-out\n                         ".concat(i?"w-20":"w-64"),children:m})]})},d=t(7683);let u=()=>{let[e,r]=(0,s.useState)(!1),t=(0,s.useRef)(null),o=(0,n.a)();(0,s.useEffect)(()=>{let e=e=>{t.current&&!t.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let i=()=>r(!1);return(0,a.jsxs)("div",{className:"relative",ref:t,children:[(0,a.jsxs)("button",{onClick:()=>r(!e),className:"flex items-center p-2 rounded-full hover:bg-accent text-muted-foreground hover:text-accent-foreground transition-colors","aria-expanded":e,"aria-haspopup":"true",id:"user-menu-button",children:[(0,a.jsx)(c.aD,{className:"w-7 h-7"}),(0,a.jsx)(c.v4,{className:"w-4 h-4 ml-1 opacity-70"})]}),e&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-popover text-popover-foreground rounded-md shadow-lg py-1 z-50 border",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:[o.currentUser&&(0,a.jsxs)("div",{className:"px-4 py-2 border-b",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-foreground truncate",children:[o.currentUser.firstName," ",o.currentUser.lastName]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:o.currentUser.email})]}),(0,a.jsxs)(l.default,{href:"/admin/profile",onClick:i,className:"w-full text-left flex items-center px-4 py-2 text-sm text-foreground hover:bg-accent hover:text-accent-foreground",role:"menuitem",children:[(0,a.jsx)(c.aD,{className:"w-5 h-5 mr-2 opacity-70"})," Perfil"]}),(0,a.jsxs)(l.default,{href:"/admin/settings",onClick:i,className:"w-full text-left flex items-center px-4 py-2 text-sm text-foreground hover:bg-accent hover:text-accent-foreground",role:"menuitem",children:[(0,a.jsx)(c.IE,{className:"w-5 h-5 mr-2 opacity-70"})," Ajustes"]}),(0,a.jsx)("hr",{className:"border-border my-1"}),(0,a.jsxs)("button",{onClick:()=>{o.logout(),r(!1)},className:"w-full text-left flex items-center px-4 py-2 text-sm text-destructive hover:bg-destructive/10 hover:text-destructive",role:"menuitem",children:[(0,a.jsx)(c.R0,{className:"w-5 h-5 mr-2 opacity-70"})," Salir"]})]})]})};var m=e=>{let{appName:r,onToggleMobileSidebar:t,sidebarCollapsed:s}=e;return(0,a.jsx)("header",{className:"bg-background text-foreground sticky top-0 z-30",children:(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:t,className:"md:hidden mr-3 p-2 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors","aria-label":"Abrir barra lateral",children:(0,a.jsx)(c.Oq,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"text-xl font-semibold text-primary ".concat(s?"md:block":"block"),children:r})]}),(0,a.jsx)("div",{className:"flex-1 max-w-xs ml-4 hidden sm:block md:max-w-md lg:max-w-lg",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(c.W1,{className:"h-5 w-5 text-muted-foreground"})}),(0,a.jsx)("input",{className:"block w-full pl-10 pr-16 py-2 border border-input rounded-md leading-5 bg-white dark:bg-slate-800 text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring sm:text-sm transition-colors",placeholder:"Buscar...",type:"search",name:"search","aria-label":"Campo de b\xfasqueda"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("kbd",{className:"kbd kbd-sm",children:"Ctrl K"})})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,a.jsx)("button",{className:"p-2 rounded-full hover:bg-accent text-muted-foreground hover:text-accent-foreground transition-colors","aria-label":"Notificaciones",children:(0,a.jsx)(c.Dk,{className:"w-6 h-6"})}),(0,a.jsx)(d.Z,{})," ",(0,a.jsx)(u,{})]})]})})})},h=t(8685),x=()=>{let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"bg-background text-muted-foreground border-t border-border px-4 sm:px-6 lg:px-8 py-4 text-center text-xs",children:(0,a.jsxs)("p",{children:["\xa9 ",e," ",h.Nv,". Todos los derechos reservados."]})})},f=e=>{let{children:r}=e,[t,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-background overflow-hidden",children:[(0,a.jsx)(i,{navItems:h.N7,appName:h.Nv,isMobileOpen:t,setMobileOpen:n,isCollapsed:o,toggleCollapsed:()=>l(!o)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(m,{appName:h.Nv,onToggleMobileSidebar:()=>n(!t),sidebarCollapsed:o}),(0,a.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-4 sm:p-6 lg:p-8",children:r}),(0,a.jsx)(x,{})," "]})]})},g=()=>(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col items-center justify-center text-center p-4",children:[(0,a.jsx)(c.IE,{className:"w-16 h-16 text-primary animate-spin mb-6"}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:h.Nv}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Cargando aplicaci\xf3n..."})]});function p(e){let{children:r}=e,{isAuthenticated:t,isLoading:l}=(0,n.a)(),c=(0,o.useRouter)();return((0,s.useEffect)(()=>{l||t||c.replace("/login")},[l,t,c]),l||!t)?(0,a.jsx)(g,{}):(0,a.jsx)(f,{children:r})}},7683:function(e,r,t){"use strict";var a=t(7437);t(2265);var s=t(6476),n=t(8560);r.Z=()=>{let{theme:e,setTheme:r}=(0,s.F)();return e?(0,a.jsx)("button",{onClick:()=>r("light"===e?"dark":"light"),className:"p-2 rounded-full hover:bg-accent text-muted-foreground hover:text-accent-foreground transition-colors","aria-label":"light"===e?"Cambiar a tema oscuro":"Cambiar a tema claro",children:"light"===e?(0,a.jsx)(n.kL,{className:"w-6 h-6"}):(0,a.jsx)(n.NW,{className:"w-6 h-6"})}):null}},2779:function(e,r,t){"use strict";t.d(r,{H:function(){return i},a:function(){return d}});var a=t(7437),s=t(2265),n=t(3464);let o="http://localhost:3001",l={login:async e=>{try{return(await n.Z.post("".concat(o,"/auth/login"),e)).data}catch(e){throw e}},register:async e=>{let r={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role};try{return(await n.Z.post("".concat(o,"/auth/register"),r)).data}catch(e){throw e}}},c=(0,s.createContext)(void 0),i=e=>{let{children:r}=e,[t,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("wolfflow_token"),r=localStorage.getItem("wolfflow_user");if(e&&r){n(e);try{i(JSON.parse(r))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("wolfflow_user"),localStorage.removeItem("wolfflow_token"),n(null),i(null)}}u(!1)},[]);let m=async e=>{u(!0);try{let r=await l.login(e);if(r&&r.access_token&&r.user)return n(r.access_token),i(r.user),localStorage.setItem("wolfflow_token",r.access_token),localStorage.setItem("wolfflow_user",JSON.stringify(r.user)),u(!1),{success:!0};return u(!1),{success:!1,error:r.message||"Login failed: No token or user data received."}}catch(e){var r,t;return u(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during login."}}},h=async e=>{u(!0);try{let r=await l.register(e);if(r){let t=await m({email:e.email,password:e.password});return u(!1),{success:t.success,error:t.error,data:r}}return u(!1),{success:!0,data:r}}catch(e){var r,t;return u(!1),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An unknown error occurred during registration."}}};return(0,a.jsx)(c.Provider,{value:{token:t,currentUser:o,isAuthenticated:!!t,isLoading:d,login:m,logout:()=>{u(!0),n(null),i(null),localStorage.removeItem("wolfflow_token"),localStorage.removeItem("wolfflow_user"),u(!1)},register:h},children:r})},d=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6476:function(e,r,t){"use strict";t.d(r,{F:function(){return l},f:function(){return o}});var a=t(7437),s=t(2265);let n=(0,s.createContext)(void 0),o=e=>{let{children:r}=e,[t,o]=(0,s.useState)("light"),[l,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e="light";try{let r=localStorage.getItem("wolfflow_theme");e=r&&("light"===r||"dark"===r)?r:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(e){console.error("Error accessing localStorage or matchMedia for theme:",e)}o(e),c(!0)},[]),(0,s.useEffect)(()=>{if(!l)return;let e=window.document.documentElement;"dark"===t?e.classList.add("dark"):e.classList.remove("dark");try{localStorage.setItem("wolfflow_theme",t)}catch(e){console.error("Error saving theme to localStorage:",e)}},[t,l]),(0,a.jsx)(n.Provider,{value:{theme:t,setTheme:e=>{o(e)}},children:r})},l=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8685:function(e,r,t){"use strict";t.d(r,{N7:function(){return s},Nv:function(){return o},rJ:function(){return n}});var a=t(8560);let s=[{name:"Dashboard",path:"/admin/dashboard",icon:a.tv},{name:"Clientes/Proveedores",path:"/admin/clients",icon:a.Vp},{name:"Ventas",path:"/admin/sales",icon:a.Q1},{name:"Facturaci\xf3n",path:"/admin/invoices",icon:a.YH},{name:"Ingreso de Mercader\xeda",path:"/admin/purchases",icon:a.vx},{name:"\xd3rdenes de Compra",path:"/admin/purchase-orders",icon:a.Yw},{name:"Cotizaciones",path:"/admin/quotes",icon:a.YH},{name:"Productos/Servicios",path:"/admin/inventory",icon:a.vx},{name:"Finanzas",path:"/admin/finance",icon:a.ci},{name:"Reportes",path:"/admin/reports",icon:a.Np},{name:"Configuraci\xf3n",path:"/admin/settings",icon:a.IE}],n=[{name:"Inicio",path:"/"},{name:"Cat\xe1logo",path:"/products"},{name:"Servicios",path:"/#servicios"}],o="SubRed ERP"},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[3464,7648,8560,2971,2117,1744],function(){return e(e.s=1135)}),_N_E=e.O()}]);
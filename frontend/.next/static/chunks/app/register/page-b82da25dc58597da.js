(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{131:function(e,t,a){Promise.resolve().then(a.bind(a,2833))},2833:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(2265),o=a(2779),n=a(8685),i=a(8560),l=a(9376),c=a(7648);t.default=()=>{let[e,t]=(0,s.useState)(""),[a,u]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[g,v]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),b=(0,o.a)(),j=(0,l.useRouter)(),y=async t=>{if(t.preventDefault(),v(null),f!==p){v("Las contrase\xf1as no coinciden.");return}N(!0);let r=await b.register({firstName:e,lastName:a,email:d,password:f});N(!1),r.success?j.push("/admin/dashboard"):v(r.error||"Fallo el registro. Por favor, intente de nuevo.")},S="appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-muted-foreground focus:outline-none sm:text-sm transition-colors duration-150",k="border-border bg-background text-foreground focus:ring-ring focus:border-ring";return(0,r.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[(0,r.jsx)(i.oL,{className:"mx-auto h-12 w-auto text-primary"}),(0,r.jsxs)("h2",{className:"mt-6 text-3xl font-extrabold text-foreground",children:["Crear una cuenta en ",n.Nv]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["O"," ",(0,r.jsx)(c.default,{href:"/login",className:"font-medium text-primary hover:text-primary/80 dark:hover:text-primary/70",children:"inicia sesi\xf3n con una cuenta existente"})]})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsx)("div",{className:"bg-card text-card-foreground py-8 px-4 shadow-subtle dark:shadow-md sm:rounded-lg sm:px-10 border",children:(0,r.jsxs)("form",{className:"space-y-6",onSubmit:y,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground",children:"Nombre"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:e,onChange:e=>t(e.target.value),className:"".concat(S," ").concat(k)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground",children:"Apellido"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:a,onChange:e=>u(e.target.value),className:"".concat(S," ").concat(k)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground",children:"Correo Electr\xf3nico"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:d,onChange:e=>m(e.target.value),className:"".concat(S," ").concat(k)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground",children:"Contrase\xf1a"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:f,onChange:e=>h(e.target.value),className:"".concat(S," ").concat(k)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground",children:"Confirmar Contrase\xf1a"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:p,onChange:e=>x(e.target.value),className:"".concat(S," ").concat(k)})})]}),g&&(0,r.jsx)("div",{className:"rounded-md bg-destructive/10 p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-destructive",children:g})})})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:w,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-primary-foreground bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 transition-colors",children:w?"Registrando...":"Registrarse"})})]})})})]})}},2779:function(e,t,a){"use strict";a.d(t,{H:function(){return c},a:function(){return u}});var r=a(7437),s=a(2265),o=a(3464);let n="http://localhost:3001",i={login:async e=>{try{return(await o.Z.post("".concat(n,"/auth/login"),e)).data}catch(e){throw e}},register:async e=>{let t={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role};try{return(await o.Z.post("".concat(n,"/auth/register"),t)).data}catch(e){throw e}}},l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[a,o]=(0,s.useState)(null),[n,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("wolfflow_token"),t=localStorage.getItem("wolfflow_user");if(e&&t){o(e);try{c(JSON.parse(t))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("wolfflow_user"),localStorage.removeItem("wolfflow_token"),o(null),c(null)}}d(!1)},[]);let m=async e=>{d(!0);try{let t=await i.login(e);if(t&&t.access_token&&t.user)return o(t.access_token),c(t.user),localStorage.setItem("wolfflow_token",t.access_token),localStorage.setItem("wolfflow_user",JSON.stringify(t.user)),d(!1),{success:!0};return d(!1),{success:!1,error:t.message||"Login failed: No token or user data received."}}catch(e){var t,a;return d(!1),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||e.message||"An unknown error occurred during login."}}},f=async e=>{d(!0);try{let t=await i.register(e);if(t){let a=await m({email:e.email,password:e.password});return d(!1),{success:a.success,error:a.error,data:t}}return d(!1),{success:!0,data:t}}catch(e){var t,a;return d(!1),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||e.message||"An unknown error occurred during registration."}}};return(0,r.jsx)(l.Provider,{value:{token:a,currentUser:n,isAuthenticated:!!a,isLoading:u,login:m,logout:()=>{d(!0),o(null),c(null),localStorage.removeItem("wolfflow_token"),localStorage.removeItem("wolfflow_user"),d(!1)},register:f},children:t})},u=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8685:function(e,t,a){"use strict";a.d(t,{N7:function(){return s},Nv:function(){return n},rJ:function(){return o}});var r=a(8560);let s=[{name:"Dashboard",path:"/admin/dashboard",icon:r.tv},{name:"Clientes/Proveedores",path:"/admin/clients",icon:r.Vp},{name:"Ventas",path:"/admin/sales",icon:r.Q1},{name:"Facturaci\xf3n",path:"/admin/invoices",icon:r.YH},{name:"Ingreso de Mercader\xeda",path:"/admin/purchases",icon:r.vx},{name:"\xd3rdenes de Compra",path:"/admin/purchase-orders",icon:r.Yw},{name:"Cotizaciones",path:"/admin/quotes",icon:r.YH},{name:"Productos/Servicios",path:"/admin/inventory",icon:r.vx},{name:"Finanzas",path:"/admin/finance",icon:r.ci},{name:"Reportes",path:"/admin/reports",icon:r.Np},{name:"Configuraci\xf3n",path:"/admin/settings",icon:r.IE}],o=[{name:"Inicio",path:"/"},{name:"Cat\xe1logo",path:"/products"},{name:"Servicios",path:"/#servicios"}],n="SubRed ERP"},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[3464,7648,8560,2971,2117,1744],function(){return e(e.s=131)}),_N_E=e.O()}]);
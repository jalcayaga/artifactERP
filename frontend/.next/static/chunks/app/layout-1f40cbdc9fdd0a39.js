(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{8814:function(e,t,r){Promise.resolve().then(r.bind(r,4374))},4374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437);r(2265),r(7960);var o=r(6476),a=r(2779),i=r(9397),s=r(8685);function c(e){let{children:t}=e;return(0,n.jsxs)("html",{lang:"es",children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("meta",{charSet:"UTF-8"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("title",{children:s.Nv}),(0,n.jsx)("meta",{name:"description",content:"Plataforma integral ERP y E-commerce para SubRed, con un frontend moderno en Next.js y React."}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,n.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("meta",{name:"theme-color",content:"#00DFFC"}),(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap",rel:"stylesheet"})]}),(0,n.jsx)("body",{className:"font-sans",children:(0,n.jsx)(o.f,{children:(0,n.jsx)(a.H,{children:(0,n.jsxs)(i.Z,{children:[" ",t]})})})})]})}},2779:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return u}});var n=r(7437),o=r(2265),a=r(3464);let i="http://localhost:3001",s={login:async e=>{try{return(await a.Z.post("".concat(i,"/auth/login"),e)).data}catch(e){throw e}},register:async e=>{let t={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role};try{return(await a.Z.post("".concat(i,"/auth/register"),t)).data}catch(e){throw e}}},c=(0,o.createContext)(void 0),l=e=>{let{children:t}=e,[r,a]=(0,o.useState)(null),[i,l]=(0,o.useState)(null),[u,d]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("wolfflow_token"),t=localStorage.getItem("wolfflow_user");if(e&&t){a(e);try{l(JSON.parse(t))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("wolfflow_user"),localStorage.removeItem("wolfflow_token"),a(null),l(null)}}d(!1)},[]);let m=async e=>{d(!0);try{let t=await s.login(e);if(t&&t.access_token&&t.user)return a(t.access_token),l(t.user),localStorage.setItem("wolfflow_token",t.access_token),localStorage.setItem("wolfflow_user",JSON.stringify(t.user)),d(!1),{success:!0};return d(!1),{success:!1,error:t.message||"Login failed: No token or user data received."}}catch(e){var t,r;return d(!1),{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||e.message||"An unknown error occurred during login."}}},f=async e=>{d(!0);try{let t=await s.register(e);if(t){let r=await m({email:e.email,password:e.password});return d(!1),{success:r.success,error:r.error,data:t}}return d(!1),{success:!0,data:t}}catch(e){var t,r;return d(!1),{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||e.message||"An unknown error occurred during registration."}}};return(0,n.jsx)(c.Provider,{value:{token:r,currentUser:i,isAuthenticated:!!r,isLoading:u,login:m,logout:()=>{d(!0),a(null),l(null),localStorage.removeItem("wolfflow_token"),localStorage.removeItem("wolfflow_user"),d(!1)},register:f},children:t})},u=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return c},j:function(){return l}});var n=r(7437),o=r(2265);let a=(0,o.createContext)(void 0),i="subred_ecommerce_cart",s={id:"serv-install-001",name:"Servicio de Instalaci\xf3n Profesional",price:5e4},c=e=>{let{children:t}=e,[r,c]=(0,o.useState)(()=>{try{let e=localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){console.error("Error loading cart from localStorage:",e)}return[]});(0,o.useEffect)(()=>{try{localStorage.setItem(i,JSON.stringify(r))}catch(e){console.error("Error saving cart to localStorage:",e)}},[r]);let l=e=>{c(t=>t.filter(t=>t.productId!==e)),console.log("PRODUCT with ID ".concat(e," removed from cart."))},u=r.reduce((e,t)=>{let r=t.price*t.quantity;return t.installationService&&(r+=t.installationService.price*t.quantity),e+r},0),d=r.reduce((e,t)=>e+t.quantity,0);return(0,n.jsx)(a.Provider,{value:{items:r,addItem:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(n=>{let o=n.findIndex(t=>t.productId===e.id),a=[...n],i=r&&"PRODUCT"===e.productType?{id:s.id,name:s.name,price:s.price}:null;if(o>-1){let e={...a[o],quantity:a[o].quantity+t,installationService:void 0!==i?i:a[o].installationService};a[o]=e}else a.push({productId:e.id,name:e.name,price:e.price,quantity:t,image:e.images&&e.images.length>0?e.images[0]:void 0,installationService:i});return console.log("Cart items after adding ".concat(e.name,":"),a),a})},removeItem:l,updateItemQuantity:(e,t)=>{if(t<=0){l(e);return}c(r=>r.map(r=>r.productId===e?{...r,quantity:t}:r)),console.log("Quantity of PRODUCT with ID ".concat(e," updated to ").concat(t,"."))},clearCart:()=>{c([]),console.log("Carrito limpiado.")},cartTotal:u,itemCount:d},children:t})},l=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},6476:function(e,t,r){"use strict";r.d(t,{F:function(){return s},f:function(){return i}});var n=r(7437),o=r(2265);let a=(0,o.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)("light"),[s,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e="light";try{let t=localStorage.getItem("wolfflow_theme");e=t&&("light"===t||"dark"===t)?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(e){console.error("Error accessing localStorage or matchMedia for theme:",e)}i(e),c(!0)},[]),(0,o.useEffect)(()=>{if(!s)return;let e=window.document.documentElement;"dark"===r?e.classList.add("dark"):e.classList.remove("dark");try{localStorage.setItem("wolfflow_theme",r)}catch(e){console.error("Error saving theme to localStorage:",e)}},[r,s]),(0,n.jsx)(a.Provider,{value:{theme:r,setTheme:e=>{i(e)}},children:t})},s=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8685:function(e,t,r){"use strict";r.d(t,{N7:function(){return o},Nv:function(){return i},rJ:function(){return a}});var n=r(8560);let o=[{name:"Dashboard",path:"/admin/dashboard",icon:n.tv},{name:"Clientes/Proveedores",path:"/admin/clients",icon:n.Vp},{name:"Ventas",path:"/admin/sales",icon:n.Q1},{name:"Facturaci\xf3n",path:"/admin/invoices",icon:n.YH},{name:"Ingreso de Mercader\xeda",path:"/admin/purchases",icon:n.vx},{name:"\xd3rdenes de Compra",path:"/admin/purchase-orders",icon:n.Yw},{name:"Cotizaciones",path:"/admin/quotes",icon:n.YH},{name:"Productos/Servicios",path:"/admin/inventory",icon:n.vx},{name:"Finanzas",path:"/admin/finance",icon:n.ci},{name:"Reportes",path:"/admin/reports",icon:n.Np},{name:"Configuraci\xf3n",path:"/admin/settings",icon:n.IE}],a=[{name:"Inicio",path:"/"},{name:"Cat\xe1logo",path:"/products"},{name:"Servicios",path:"/#servicios"}],i="SubRed ERP"},7960:function(){}},function(e){e.O(0,[3587,3464,8560,2971,2117,1744],function(){return e(e.s=8814)}),_N_E=e.O()}]);
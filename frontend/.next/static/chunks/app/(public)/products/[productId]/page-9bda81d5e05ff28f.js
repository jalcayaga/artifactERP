(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4425],{9782:function(e,t,r){Promise.resolve().then(r.bind(r,8882))},8882:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),o=r(2265),n=r(9138),s=r(9376),c=r(9397),i=r(8560),l=r(4508),d=r(6070),u=e=>{let{productId:t}=e,[r,u]=(0,o.useState)(null),[m,p]=(0,o.useState)(!0),[h,f]=(0,o.useState)(null),[g,x]=(0,o.useState)(1),[y,b]=(0,o.useState)(null),[v,N]=(0,o.useState)(!1),[j,w]=(0,o.useState)(!1),{addItem:S}=(0,c.j)(),k=(0,s.useRouter)();(0,o.useEffect)(()=>{if(!t){p(!1),f("ID de producto no v\xe1lido.");return}(async()=>{try{p(!0),f(null);let e=await n.M.getPublishedProductById(t);e?(u(e),e.images&&e.images.length>0&&b(e.images[0])):f("Producto no encontrado.")}catch(e){f(e.message||"No se pudo cargar el producto."),console.error(e)}finally{p(!1)}})()},[t]);let C=e=>{x(t=>Math.max(1,t+e))};if(m)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-12 text-center text-muted-foreground min-h-[60vh] flex items-center justify-center",children:"Cargando detalles del producto..."});if(h)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-12 text-center text-destructive min-h-[60vh] flex items-center justify-center",children:h});if(!r)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-12 text-center text-muted-foreground min-h-[60vh] flex items-center justify-center",children:"Producto no disponible."});let P="SERVICE"===r.productType,I=!P&&null!==r.totalStock&&void 0!==r.totalStock&&r.totalStock>0,A=P||I&&r.totalStock>=g,D=1.19*r.price;return(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12 items-start",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-muted rounded-xl overflow-hidden border border-border shadow-sm sticky top-24",children:y?(0,a.jsx)("img",{src:y,alt:r.name,className:"w-full h-full object-contain p-2"}):r.images&&r.images.length>0?(0,a.jsx)("img",{src:r.images[0],alt:r.name,className:"w-full h-full object-contain p-2"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(i.Fj,{className:"w-24 h-24 text-muted-foreground opacity-30"})})}),r.images&&r.images.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2.5",children:r.images.map((e,t)=>(0,a.jsx)("button",{onClick:()=>b(e),className:"aspect-square bg-muted rounded-lg overflow-hidden border-2 transition-all duration-150 ease-in-out\n                              ".concat(y===e?"border-primary shadow-md scale-105":"border-transparent hover:border-border hover:opacity-80"),children:(0,a.jsx)("img",{src:e,alt:"".concat(r.name," - thumbnail ").concat(t+1),className:"w-full h-full object-cover"})},t))})]}),(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[r.category&&(0,a.jsx)("p",{className:"text-sm font-medium text-primary uppercase tracking-wider",children:r.category}),(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-foreground leading-tight",children:r.name}),r.sku&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:[(0,a.jsx)(i.lO,{className:"w-3.5 h-3.5 mr-1.5"})," SKU: ",r.sku]})]}),(0,a.jsxs)("p",{className:"text-3xl sm:text-4xl font-semibold text-primary",children:[(0,l.eQ)(D),(0,a.jsx)("span",{className:"text-sm text-muted-foreground ml-2",children:"IVA Incluido"})]}),r.description&&(0,a.jsx)("p",{className:"text-base text-muted-foreground leading-relaxed whitespace-pre-wrap",children:r.description}),r.technicalSheetUrl&&(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)("a",{href:"http://localhost:3001".concat(r.technicalSheetUrl),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-secondary hover:bg-secondary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary",children:[(0,a.jsx)(i.YH,{className:"w-5 h-5 mr-2"}),"Descargar Ficha T\xe9cnica"]})}),"PRODUCT"===r.productType&&null!==r.totalStock&&void 0!==r.totalStock&&(0,a.jsxs)("p",{className:"text-sm font-medium flex items-center ".concat(r.totalStock>0?"text-emerald-600 dark:text-emerald-400":"text-destructive"),children:[(0,a.jsx)(i.vx,{className:"w-4 h-4 mr-1.5"}),r.totalStock>0?"".concat(r.totalStock," unidades disponibles"):"Producto Agotado"]}),(0,a.jsx)(d.Zb,{className:"bg-muted/50 dark:bg-card/60 border-border/70",children:(0,a.jsxs)(d.aY,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"quantity",className:"text-sm font-medium text-foreground",children:"Cantidad:"}),(0,a.jsxs)("div",{className:"flex items-center border border-input rounded-md bg-background shadow-sm",children:[(0,a.jsx)("button",{onClick:()=>C(-1),className:"px-3 py-2 text-lg text-muted-foreground hover:bg-accent rounded-l-md transition-colors focus:outline-none focus:ring-1 focus:ring-primary","aria-label":"Disminuir cantidad",children:(0,a.jsx)(i.V_,{className:"w-4 h-4"})}),(0,a.jsx)("input",{type:"number",id:"quantity",name:"quantity",value:g,onChange:e=>x(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-12 text-center border-x border-input bg-transparent text-foreground focus:outline-none py-2 appearance-none [-moz-appearance:_textfield]","aria-label":"Cantidad de producto"}),(0,a.jsx)("button",{onClick:()=>C(1),className:"px-3 py-2 text-lg text-muted-foreground hover:bg-accent rounded-r-md transition-colors focus:outline-none focus:ring-1 focus:ring-primary","aria-label":"Aumentar cantidad",children:(0,a.jsx)(i.pO,{className:"w-4 h-4"})})]})]}),"PRODUCT"===r.productType&&(0,a.jsxs)("div",{className:"flex items-center space-x-2.5 pt-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"includeInstallation",checked:v,onChange:e=>N(e.target.checked),className:"h-4 w-4 text-primary border-border rounded focus:ring-2 focus:ring-primary focus:ring-offset-1 dark:focus:ring-offset-card","aria-label":"A\xf1adir servicio de instalaci\xf3n"}),(0,a.jsxs)("label",{htmlFor:"includeInstallation",className:"text-sm text-foreground flex items-center cursor-pointer",children:[(0,a.jsx)(i.KY,{className:"w-4 h-4 mr-1.5 text-primary/90"}),"A\xf1adir Servicio de Instalaci\xf3n (+",(0,l.eQ)(5e4),")"]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>{r&&(S(r,g,v),w(!0),setTimeout(()=>w(!1),3e3))},disabled:!A||m,className:"w-full sm:w-auto flex items-center justify-center bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-card transition-all duration-200 ease-in-out text-base disabled:opacity-60 disabled:cursor-not-allowed",children:[(0,a.jsx)(i.Q1,{className:"w-5 h-5 mr-2.5"}),"A\xf1adir al Carrito"]}),(0,a.jsx)("button",{onClick:()=>{r&&(S(r,g,v),k.push("/checkout"))},disabled:!A||m,className:"w-full sm:w-auto flex items-center justify-center bg-secondary hover:bg-secondary/90 text-secondary-foreground font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:ring-offset-2 dark:focus:ring-offset-card transition-all duration-200 ease-in-out text-base disabled:opacity-60 disabled:cursor-not-allowed",children:"Comprar Ahora"})]}),"PRODUCT"===r.productType&&null!==r.totalStock&&void 0!==r.totalStock&&r.totalStock<g&&r.totalStock>0&&(0,a.jsxs)("p",{className:"text-xs text-destructive mt-1",children:["No hay suficiente stock. Solo ",r.totalStock," unidades disponibles."]}),j&&(0,a.jsxs)("div",{className:"mt-3 flex items-center text-sm text-emerald-600 dark:text-emerald-400 transition-opacity duration-300",children:[(0,a.jsx)(i.rE,{className:"w-5 h-5 mr-2"}),"\xa1Producto a\xf1adido al carrito!"]})]})}),r.longDescription&&(0,a.jsxs)("div",{className:"prose prose-sm dark:prose-invert max-w-none text-foreground pt-4 border-t border-border/50",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"Detalles Adicionales:"}),(0,a.jsx)("div",{className:"whitespace-pre-wrap text-muted-foreground leading-relaxed",children:r.longDescription})]})]})]})})};function m(){let e=(0,s.useParams)(),t="string"==typeof e.productId?e.productId:"";return t?(0,a.jsx)(u,{productId:t}):(0,a.jsx)("p",{className:"text-center py-10",children:"Cargando producto..."})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return s},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var a=r(7437),o=r(2265),n=r(4508);let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl bg-card text-card-foreground shadow-sm","border border-border","transition-all duration-200 ease-in-out","hover:shadow-lg dark:hover:shadow-primary/20","hover:border-border dark:hover:border-primary/40","dark:hover:bg-muted/20",r),...o})});s.displayName="Card";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-5",r),...o})});c.displayName="CardHeader";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-xl font-semibold leading-none tracking-tight",r),...o})});i.displayName="CardTitle";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...o})});l.displayName="CardDescription";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-5 pt-0",r),...o})});d.displayName="CardContent";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-5 pt-0",r),...o})});u.displayName="CardFooter"},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return i},j:function(){return l}});var a=r(7437),o=r(2265);let n=(0,o.createContext)(void 0),s="subred_ecommerce_cart",c={id:"serv-install-001",name:"Servicio de Instalaci\xf3n Profesional",price:5e4},i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(()=>{try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch(e){console.error("Error loading cart from localStorage:",e)}return[]});(0,o.useEffect)(()=>{try{localStorage.setItem(s,JSON.stringify(r))}catch(e){console.error("Error saving cart to localStorage:",e)}},[r]);let l=e=>{i(t=>t.filter(t=>t.productId!==e)),console.log("PRODUCT with ID ".concat(e," removed from cart."))},d=r.reduce((e,t)=>{let r=t.price*t.quantity;return t.installationService&&(r+=t.installationService.price*t.quantity),e+r},0),u=r.reduce((e,t)=>e+t.quantity,0);return(0,a.jsx)(n.Provider,{value:{items:r,addItem:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(a=>{let o=a.findIndex(t=>t.productId===e.id),n=[...a],s=r&&"PRODUCT"===e.productType?{id:c.id,name:c.name,price:c.price}:null;if(o>-1){let e={...n[o],quantity:n[o].quantity+t,installationService:void 0!==s?s:n[o].installationService};n[o]=e}else n.push({productId:e.id,name:e.name,price:e.price,quantity:t,image:e.images&&e.images.length>0?e.images[0]:void 0,installationService:s});return console.log("Cart items after adding ".concat(e.name,":"),n),n})},removeItem:l,updateItemQuantity:(e,t)=>{if(t<=0){l(e);return}i(r=>r.map(r=>r.productId===e?{...r,quantity:t}:r)),console.log("Quantity of PRODUCT with ID ".concat(e," updated to ").concat(t,"."))},clearCart:()=>{i([]),console.log("Carrito limpiado.")},cartTotal:d,itemCount:u},children:t})},l=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},9116:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var a=r(3464);let o=()=>localStorage.getItem("wolfflow_token"),n=a.Z.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=o();return console.log("Auth Token being sent:",t),t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e))},9138:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var a=r(9116);let o={async getAllProducts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await a.h.get("/products",{params:{page:t,limit:r},headers:{Authorization:"Bearer ".concat(e)}})).data},async searchProducts(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(await a.h.get("/products/search",{params:{term:t,page:r,limit:o},headers:{Authorization:"Bearer ".concat(e)}})).data},async getPublishedProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return(await a.h.get("/products/published",{params:{page:e,limit:t,category:r,searchQuery:o,minPrice:n,maxPrice:s}})).data},getPublishedProductById:async e=>(await a.h.get("/products/published/".concat(e))).data,getProductLots:async(e,t)=>(await a.h.get("/products/".concat(e,"/lots"),{headers:{Authorization:"Bearer ".concat(t)}})).data,getAverageCost:async(e,t)=>(await a.h.get("/products/".concat(e,"/average-cost"),{headers:{Authorization:"Bearer ".concat(t)}})).data,createProduct:async(e,t)=>(await a.h.post("/products",e,{headers:{Authorization:"Bearer ".concat(t)}})).data,updateProduct:async(e,t,r)=>(await a.h.patch("/products/".concat(e),t,{headers:{Authorization:"Bearer ".concat(r)}})).data,async deleteProduct(e,t){await a.h.delete("/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})},async uploadTechnicalSheet(e,t,r){let o=new FormData;return o.append("file",t),(await a.h.post("/products/".concat(e,"/technical-sheet"),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}})).data},deleteTechnicalSheet:async(e,t)=>(await a.h.delete("/products/".concat(e,"/technical-sheet"),{headers:{Authorization:"Bearer ".concat(t)}})).data}},4508:function(e,t,r){"use strict";r.d(t,{LH:function(){return i},cn:function(){return n},eQ:function(){return s},fW:function(){return l},p6:function(){return c}});var a=r(1994),o=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,a.W)(t))}function s(e){let t=Number(e);if(isNaN(t))return"$0";let r=Math.abs(t),a=(r%1).toFixed(2).substring(2),o=Math.trunc(r).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),n="$".concat(o);return"00"!==a&&(n+=",".concat(a)),t<0?"-".concat(n):n}function c(e){try{let t=new Date(e),r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return"".concat(r,"/").concat(a,"/").concat(o)}catch(t){return console.error("Invalid date provided to formatDate:",e),"Fecha inv\xe1lida"}}function i(e){if("string"!=typeof e)return NaN;let t=parseFloat(e.replace(/\$\s?|(,*)/g,"").replace(/\./g,"").replace(",","."));return isNaN(t)?0:t}function l(e){if("string"!=typeof e||(e=e.replace(/\./g,"").replace(/-/g,"")).length<2)return!1;let t=e.slice(0,-1),r=e.slice(-1).toUpperCase(),a=0,o=2;for(let e=t.length-1;e>=0;e--)a+=parseInt(t[e],10)*o,++o>7&&(o=2);let n=11-a%11;return(11===n?"0":10===n?"K":n.toString())===r}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[6137,3464,8560,2971,2117,1744],function(){return e(e.s=9782)}),_N_E=e.O()}]);